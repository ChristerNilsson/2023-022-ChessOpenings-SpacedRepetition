// Generated by CoffeeScript 2.5.1
var correctAnswer, getNextQuestion, link, undo, wrongAnswer,
  modulo = function(a, b) { return (+a % (b = +b) + b) % b; };

import {
  ass,
  log,
  range,
  split,
  param,
  hexToBase64,
  spaceShip
} from '../js/utils.js';

import {
  Button
} from '../js/button.js';

import _ from 'https://cdn.skypack.dev/lodash';

export var global = {
  //name : 'bishop',
  name: 'tree',
  arr: [],
  version: 'ver: B',
  board: null,
  child: 0, // move under consideration
  children: [], // sorted list of [value,san,uci]
  SIZE: 50, // of square
  pics: {}, // 12 pjäser
  // data:null,
  buttons: [],
  database: {}, // fen => value
  //currNode:null, # pekar in i ett träd
  //count: 0, # räknar antal nya drag i trädet
  stack: [] // innehåller aktuell gren
};

export var coords = (uci) => {
  var c0, c1, r0, r1;
  param.String(uci);
  c0 = "abcdefgh".indexOf(uci[0]);
  r0 = "12345678".indexOf(uci[1]);
  c1 = "abcdefgh".indexOf(uci[2]);
  r1 = "12345678".indexOf(uci[3]);
  return param.Array([c0 + 8 * r0, c1 + 8 * r1]);
};

ass([8, 24], coords("a2a4"));

export var toUCI = ([from, to]) => {
  var c0, c1, r0, r1;
  param.Integer(from);
  param.Integer(to);
  c0 = "abcdefgh"[from % 8];
  r0 = "12345678"[Math.floor(from / 8)];
  c1 = "abcdefgh"[to % 8];
  r1 = "12345678"[Math.floor(to / 8)];
  return param.String(c0 + r0 + c1 + r1);
};

ass("e2e4", toUCI([12, 28]));

export var toObjectNotation = ([from, to]) => {
  var uci;
  param.Integer(from);
  param.Integer(to);
  uci = toUCI([from, to]);
  from = uci.slice(0, 2);
  to = uci.slice(2, 4);
  return param.Object({from, to});
};

ass({
  from: 'e2',
  to: 'e4'
}, toObjectNotation([12, 28]));

export var empty = (n) => {
  param.Integer(n);
  return param.String((1 + Math.floor(n / 8)).toString());
};

undo = () => {
  if (global.stack.length === 0) {
    return;
  }
  global.chess.undo();
  return global.currNode = global.stack.pop();
};

// makeChildren()
export var dumpState = () => {
  console.log('STATE ########');
  console.log('  stack', global.stack);
  console.log('  currNode', global.currNode);
  return console.log('  history', global.chess.history());
};

link = () => {
  return 'https://lichess.org/analysis/' + global.chess.fen();
};

correctAnswer = () => {
  global.spacedRepetition.correct();
  return getNextQuestion();
};

wrongAnswer = () => {
  global.spacedRepetition.wrong();
  return getNextQuestion();
};

getNextQuestion = () => {
  var g, i, j, k, len, len1, move, moves, qi, ref, sr;
  g = global;
  sr = g.spacedRepetition;
  if (sr.boxes[0].length === 0) {
    ref = range(5);
    for (j = 0, len = ref.length; j < len; j++) {
      i = ref[j];
      if (g.index < g.questions.length - 1) {
        qi = g.questions[g.index];
        sr.add({
          p: g.tree.arr[qi][3],
          q: g.tree.getPath(qi),
          a: g.tree.getAnswers(qi, g.stopp)
        });
        g.index++;
      }
    }
  }
  sr.pick();
  g.chess.reset();
  moves = sr.current().q.split('.');
  for (k = 0, len1 = moves.length; k < len1; k++) {
    move = moves[k];
    g.chess.move({
      from: move.slice(0, 2),
      to: move.slice(2, 4)
    });
  }
  return g.board.flipped = moves.length % 2 === 1;
};

export var clickString = (key) => {
  var g, san, uci, value;
  param.String(key);
  g = global;
  if (key === 'flip') {
    return g.board.flip();
  } else if (key === 'link') {
    return window.open(link(), '_blank');
  } else if (key === 'up') {
    return g.child = modulo(g.child - 1, g.children.length);
  } else if (key === 'down') {
    return g.child = modulo(g.child + 1, g.children.length);
  } else if (key === 'undo') {
    return undo();
  } else if (key === 'left') {
    return undo();
  } else if (key === 'right') {
    console.log(g.children, g.child);
    [value, san, uci] = g.children[g.child];
    console.log('move', [value, san, uci]);
    g.chess.move(san);
    g.stack.push(g.currNode);
    g.currNode = g.currNode[uci];
    return makeChildren();
  } else if (key === 'save') {
    return download(g.tree, g.name + '.json');
  } else if (key === 'correct') {
    return correctAnswer();
  } else if (key === 'wrong') {
    return wrongAnswer();
  } else {
    return console.log('unknown key in clickString', key);
  }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2xvYmFscy5qcyIsInNvdXJjZVJvb3QiOiIuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxnbG9iYWxzLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsSUFBQSxhQUFBLEVBQUEsZUFBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsV0FBQTtFQUFBOztBQUFBLE9BQUE7RUFBUSxHQUFSO0VBQVksR0FBWjtFQUFnQixLQUFoQjtFQUFzQixLQUF0QjtFQUE0QixLQUE1QjtFQUFrQyxXQUFsQztFQUE4QyxTQUE5QztDQUFBLE1BQUE7O0FBQ0EsT0FBQTtFQUFRLE1BQVI7Q0FBQSxNQUFBOztBQUNBLE9BQU8sQ0FBUCxNQUFBOztBQUVBLE9BQUEsSUFBTyxNQUFBLEdBQVMsQ0FBQTs7RUFHZixJQUFBLEVBQU8sTUFIUTtFQUlmLEdBQUEsRUFBTSxFQUpTO0VBTWYsT0FBQSxFQUFRLFFBTk87RUFPZixLQUFBLEVBQU0sSUFQUztFQVFmLEtBQUEsRUFBTSxDQVJTO0VBU2YsUUFBQSxFQUFVLEVBVEs7RUFVZixJQUFBLEVBQUssRUFWVTtFQVdmLElBQUEsRUFBSyxDQUFBLENBWFU7O0VBYWYsT0FBQSxFQUFRLEVBYk87RUFjZixRQUFBLEVBQVUsQ0FBQSxDQWRLOzs7RUFpQmYsS0FBQSxFQUFNLEVBakJTO0FBQUE7O0FBb0JoQixPQUFBLElBQU8sTUFBQSxHQUFTLENBQUMsR0FBRCxDQUFBLEdBQUE7QUFDaEIsTUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQTtFQUFDLEtBQUssQ0FBQyxNQUFOLENBQWEsR0FBYjtFQUNBLEVBQUEsR0FBSyxVQUFVLENBQUMsT0FBWCxDQUFtQixHQUFHLENBQUMsQ0FBRCxDQUF0QjtFQUNMLEVBQUEsR0FBSyxVQUFVLENBQUMsT0FBWCxDQUFtQixHQUFHLENBQUMsQ0FBRCxDQUF0QjtFQUNMLEVBQUEsR0FBSyxVQUFVLENBQUMsT0FBWCxDQUFtQixHQUFHLENBQUMsQ0FBRCxDQUF0QjtFQUNMLEVBQUEsR0FBSyxVQUFVLENBQUMsT0FBWCxDQUFtQixHQUFHLENBQUMsQ0FBRCxDQUF0QjtTQUNMLEtBQUssQ0FBQyxLQUFOLENBQVksQ0FBQyxFQUFBLEdBQUcsQ0FBQSxHQUFFLEVBQU4sRUFBVSxFQUFBLEdBQUcsQ0FBQSxHQUFFLEVBQWYsQ0FBWjtBQU5lOztBQU9oQixHQUFBLENBQUksQ0FBQyxDQUFELEVBQUcsRUFBSCxDQUFKLEVBQVksTUFBQSxDQUFPLE1BQVAsQ0FBWjs7QUFFQSxPQUFBLElBQU8sS0FBQSxHQUFRLENBQUMsQ0FBQyxJQUFELEVBQU0sRUFBTixDQUFELENBQUEsR0FBQTtBQUNmLE1BQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUE7RUFBQyxLQUFLLENBQUMsT0FBTixDQUFjLElBQWQ7RUFDQSxLQUFLLENBQUMsT0FBTixDQUFjLEVBQWQ7RUFDQSxFQUFBLEdBQUssVUFBVSxDQUFDLElBQUEsR0FBSyxDQUFOO0VBQ2YsRUFBQSxHQUFLLFVBQVUsWUFBQyxPQUFNLEVBQVA7RUFDZixFQUFBLEdBQUssVUFBVSxDQUFDLEVBQUEsR0FBRyxDQUFKO0VBQ2YsRUFBQSxHQUFLLFVBQVUsWUFBQyxLQUFJLEVBQUw7U0FDZixLQUFLLENBQUMsTUFBTixDQUFhLEVBQUEsR0FBRyxFQUFILEdBQU0sRUFBTixHQUFTLEVBQXRCO0FBUGM7O0FBUWYsR0FBQSxDQUFJLE1BQUosRUFBWSxLQUFBLENBQU0sQ0FBQyxFQUFELEVBQUksRUFBSixDQUFOLENBQVo7O0FBRUEsT0FBQSxJQUFPLGdCQUFBLEdBQW1CLENBQUMsQ0FBQyxJQUFELEVBQU0sRUFBTixDQUFELENBQUEsR0FBQTtBQUMxQixNQUFBO0VBQUMsS0FBSyxDQUFDLE9BQU4sQ0FBYyxJQUFkO0VBQ0EsS0FBSyxDQUFDLE9BQU4sQ0FBYyxFQUFkO0VBQ0EsR0FBQSxHQUFNLEtBQUEsQ0FBTSxDQUFDLElBQUQsRUFBTSxFQUFOLENBQU47RUFDTixJQUFBLEdBQU8sR0FBRyxDQUFDLEtBQUosQ0FBVSxDQUFWLEVBQVksQ0FBWjtFQUNQLEVBQUEsR0FBSyxHQUFHLENBQUMsS0FBSixDQUFVLENBQVYsRUFBWSxDQUFaO1NBQ0wsS0FBSyxDQUFDLE1BQU4sQ0FBYSxDQUFDLElBQUQsRUFBTyxFQUFQLENBQWI7QUFOeUI7O0FBTzFCLEdBQUEsQ0FBSTtFQUFDLElBQUEsRUFBSyxJQUFOO0VBQVksRUFBQSxFQUFHO0FBQWYsQ0FBSixFQUEwQixnQkFBQSxDQUFpQixDQUFDLEVBQUQsRUFBSSxFQUFKLENBQWpCLENBQTFCOztBQUVBLE9BQUEsSUFBTyxLQUFBLEdBQVEsQ0FBQyxDQUFELENBQUEsR0FBQTtFQUNkLEtBQUssQ0FBQyxPQUFOLENBQWMsQ0FBZDtTQUNBLEtBQUssQ0FBQyxNQUFOLENBQWEsQ0FBQyxDQUFBLGNBQUUsSUFBRyxFQUFOLENBQVEsQ0FBQyxRQUFULENBQUEsQ0FBYjtBQUZjOztBQUlmLElBQUEsR0FBTyxDQUFBLENBQUEsR0FBQTtFQUNOLElBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFiLEtBQXVCLENBQTFCO0FBQWlDLFdBQWpDOztFQUNBLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBYixDQUFBO1NBQ0EsTUFBTSxDQUFDLFFBQVAsR0FBa0IsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFiLENBQUE7QUFIWixFQXhEUDs7O0FBOERBLE9BQUEsSUFBTyxTQUFBLEdBQVksQ0FBQSxDQUFBLEdBQUE7RUFDbEIsT0FBTyxDQUFDLEdBQVIsQ0FBWSxnQkFBWjtFQUNBLE9BQU8sQ0FBQyxHQUFSLENBQVksU0FBWixFQUFzQixNQUFNLENBQUMsS0FBN0I7RUFDQSxPQUFPLENBQUMsR0FBUixDQUFZLFlBQVosRUFBeUIsTUFBTSxDQUFDLFFBQWhDO1NBQ0EsT0FBTyxDQUFDLEdBQVIsQ0FBWSxXQUFaLEVBQXdCLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBYixDQUFBLENBQXhCO0FBSmtCOztBQU1uQixJQUFBLEdBQU8sQ0FBQSxDQUFBLEdBQUE7U0FBRywrQkFBQSxHQUFrQyxNQUFNLENBQUMsS0FBSyxDQUFDLEdBQWIsQ0FBQTtBQUFyQzs7QUFFUCxhQUFBLEdBQWdCLENBQUEsQ0FBQSxHQUFBO0VBQ2YsTUFBTSxDQUFDLGdCQUFnQixDQUFDLE9BQXhCLENBQUE7U0FDQSxlQUFBLENBQUE7QUFGZTs7QUFJaEIsV0FBQSxHQUFjLENBQUEsQ0FBQSxHQUFBO0VBQ2IsTUFBTSxDQUFDLGdCQUFnQixDQUFDLEtBQXhCLENBQUE7U0FDQSxlQUFBLENBQUE7QUFGYTs7QUFJZCxlQUFBLEdBQWtCLENBQUEsQ0FBQSxHQUFBO0FBQ2xCLE1BQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxFQUFBO0VBQUMsQ0FBQSxHQUFJO0VBQ0osRUFBQSxHQUFLLENBQUMsQ0FBQztFQUNQLElBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFELENBQUcsQ0FBQyxNQUFaLEtBQXNCLENBQXpCO0FBQ0M7SUFBQSxLQUFBLHFDQUFBOztNQUNDLElBQUcsQ0FBQyxDQUFDLEtBQUYsR0FBVSxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQVosR0FBbUIsQ0FBaEM7UUFDQyxFQUFBLEdBQUssQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsS0FBSDtRQUNoQixFQUFFLENBQUMsR0FBSCxDQUFPO1VBQUMsQ0FBQSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUQsQ0FBSSxDQUFDLENBQUQsQ0FBakI7VUFBc0IsQ0FBQSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBUCxDQUFlLEVBQWYsQ0FBeEI7VUFBNEMsQ0FBQSxFQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBUCxDQUFrQixFQUFsQixFQUFxQixDQUFDLENBQUMsS0FBdkI7UUFBL0MsQ0FBUDtRQUNBLENBQUMsQ0FBQyxLQUFGLEdBSEQ7O0lBREQsQ0FERDs7RUFNQSxFQUFFLENBQUMsSUFBSCxDQUFBO0VBQ0EsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFSLENBQUE7RUFDQSxLQUFBLEdBQVEsRUFBRSxDQUFDLE9BQUgsQ0FBQSxDQUFZLENBQUMsQ0FBQyxDQUFDLEtBQWYsQ0FBcUIsR0FBckI7RUFDUixLQUFBLHlDQUFBOztJQUNDLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBUixDQUFhO01BQUMsSUFBQSxFQUFNLElBQUksQ0FBQyxLQUFMLENBQVcsQ0FBWCxFQUFhLENBQWIsQ0FBUDtNQUF3QixFQUFBLEVBQUcsSUFBSSxDQUFDLEtBQUwsQ0FBVyxDQUFYLEVBQWEsQ0FBYjtJQUEzQixDQUFiO0VBREQ7U0FFQSxDQUFDLENBQUMsS0FBSyxDQUFDLE9BQVIsR0FBa0IsS0FBSyxDQUFDLE1BQU4sR0FBYSxDQUFiLEtBQWtCO0FBZG5COztBQWdCbEIsT0FBQSxJQUFPLFdBQUEsR0FBYyxDQUFDLEdBQUQsQ0FBQSxHQUFBO0FBQ3JCLE1BQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUE7RUFBQyxLQUFLLENBQUMsTUFBTixDQUFhLEdBQWI7RUFDQSxDQUFBLEdBQUk7RUFDSixJQUFHLEdBQUEsS0FBTyxNQUFWO1dBQXNCLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBUixDQUFBLEVBQXRCO0dBQUEsTUFDSyxJQUFHLEdBQUEsS0FBTyxNQUFWO1dBQXNCLE1BQU0sQ0FBQyxJQUFQLENBQVksSUFBQSxDQUFBLENBQVosRUFBb0IsUUFBcEIsRUFBdEI7R0FBQSxNQUNBLElBQUcsR0FBQSxLQUFPLElBQVY7V0FBc0IsQ0FBQyxDQUFDLEtBQUYsVUFBVyxDQUFDLENBQUMsS0FBRixHQUFRLEdBQU0sQ0FBQyxDQUFDLFFBQVEsQ0FBQyxRQUExRDtHQUFBLE1BQ0EsSUFBRyxHQUFBLEtBQU8sTUFBVjtXQUFzQixDQUFDLENBQUMsS0FBRixVQUFXLENBQUMsQ0FBQyxLQUFGLEdBQVEsR0FBTSxDQUFDLENBQUMsUUFBUSxDQUFDLFFBQTFEO0dBQUEsTUFDQSxJQUFHLEdBQUEsS0FBTyxNQUFWO1dBQXNCLElBQUEsQ0FBQSxFQUF0QjtHQUFBLE1BQ0EsSUFBRyxHQUFBLEtBQU8sTUFBVjtXQUFzQixJQUFBLENBQUEsRUFBdEI7R0FBQSxNQUNBLElBQUcsR0FBQSxLQUFPLE9BQVY7SUFDSixPQUFPLENBQUMsR0FBUixDQUFZLENBQUMsQ0FBQyxRQUFkLEVBQXVCLENBQUMsQ0FBQyxLQUF6QjtJQUNBLENBQUMsS0FBRCxFQUFPLEdBQVAsRUFBVyxHQUFYLENBQUEsR0FBa0IsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsS0FBSDtJQUM1QixPQUFPLENBQUMsR0FBUixDQUFZLE1BQVosRUFBbUIsQ0FBQyxLQUFELEVBQU8sR0FBUCxFQUFXLEdBQVgsQ0FBbkI7SUFDQSxDQUFDLENBQUMsS0FBSyxDQUFDLElBQVIsQ0FBYSxHQUFiO0lBQ0EsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFSLENBQWEsQ0FBQyxDQUFDLFFBQWY7SUFDQSxDQUFDLENBQUMsUUFBRixHQUFhLENBQUMsQ0FBQyxRQUFRLENBQUMsR0FBRDtXQUN2QixZQUFBLENBQUEsRUFQSTtHQUFBLE1BUUEsSUFBRyxHQUFBLEtBQU8sTUFBVjtXQUFzQixRQUFBLENBQVMsQ0FBQyxDQUFDLElBQVgsRUFBaUIsQ0FBQyxDQUFDLElBQUYsR0FBUyxPQUExQixFQUF0QjtHQUFBLE1BQ0EsSUFBRyxHQUFBLEtBQU8sU0FBVjtXQUF5QixhQUFBLENBQUEsRUFBekI7R0FBQSxNQUNBLElBQUcsR0FBQSxLQUFPLE9BQVY7V0FBdUIsV0FBQSxDQUFBLEVBQXZCO0dBQUEsTUFBQTtXQUNBLE9BQU8sQ0FBQyxHQUFSLENBQVksNEJBQVosRUFBeUMsR0FBekMsRUFEQTs7QUFuQmUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2Fzcyxsb2cscmFuZ2Usc3BsaXQscGFyYW0saGV4VG9CYXNlNjQsc3BhY2VTaGlwfSBmcm9tICcuLi9qcy91dGlscy5qcydcclxuaW1wb3J0IHtCdXR0b259IGZyb20gJy4uL2pzL2J1dHRvbi5qcydcclxuaW1wb3J0IF8gZnJvbSAnaHR0cHM6Ly9jZG4uc2t5cGFjay5kZXYvbG9kYXNoJ1xyXG5cclxuZXhwb3J0IGdsb2JhbCA9IHtcclxuXHJcblx0I25hbWUgOiAnYmlzaG9wJyxcclxuXHRuYW1lIDogJ3RyZWUnLFxyXG5cdGFyciA6IFtdLFxyXG5cclxuXHR2ZXJzaW9uOid2ZXI6IEInLFxyXG5cdGJvYXJkOm51bGwsXHJcblx0Y2hpbGQ6MCwgIyBtb3ZlIHVuZGVyIGNvbnNpZGVyYXRpb25cclxuXHRjaGlsZHJlbjogW10sICMgc29ydGVkIGxpc3Qgb2YgW3ZhbHVlLHNhbix1Y2ldXHJcblx0U0laRTo1MCwgIyBvZiBzcXVhcmVcclxuXHRwaWNzOnt9LCAjIDEyIHBqw6RzZXJcclxuXHQjIGRhdGE6bnVsbCxcclxuXHRidXR0b25zOltdLFxyXG5cdGRhdGFiYXNlOiB7fSwgIyBmZW4gPT4gdmFsdWVcclxuXHQjY3Vyck5vZGU6bnVsbCwgIyBwZWthciBpbiBpIGV0dCB0csOkZFxyXG5cdCNjb3VudDogMCwgIyByw6RrbmFyIGFudGFsIG55YSBkcmFnIGkgdHLDpGRldFxyXG5cdHN0YWNrOltdICMgaW5uZWjDpWxsZXIgYWt0dWVsbCBncmVuXHJcbn1cclxuXHJcbmV4cG9ydCBjb29yZHMgPSAodWNpKSA9PlxyXG5cdHBhcmFtLlN0cmluZyB1Y2lcclxuXHRjMCA9IFwiYWJjZGVmZ2hcIi5pbmRleE9mIHVjaVswXVxyXG5cdHIwID0gXCIxMjM0NTY3OFwiLmluZGV4T2YgdWNpWzFdXHJcblx0YzEgPSBcImFiY2RlZmdoXCIuaW5kZXhPZiB1Y2lbMl1cclxuXHRyMSA9IFwiMTIzNDU2NzhcIi5pbmRleE9mIHVjaVszXVxyXG5cdHBhcmFtLkFycmF5IFtjMCs4KnIwLCBjMSs4KnIxXVxyXG5hc3MgWzgsMjRdLCBjb29yZHMgXCJhMmE0XCJcclxuXHJcbmV4cG9ydCB0b1VDSSA9IChbZnJvbSx0b10pID0+XHJcblx0cGFyYW0uSW50ZWdlciBmcm9tXHJcblx0cGFyYW0uSW50ZWdlciB0b1xyXG5cdGMwID0gXCJhYmNkZWZnaFwiW2Zyb20lOF1cclxuXHRyMCA9IFwiMTIzNDU2NzhcIltmcm9tLy84XVxyXG5cdGMxID0gXCJhYmNkZWZnaFwiW3RvJThdXHJcblx0cjEgPSBcIjEyMzQ1Njc4XCJbdG8vLzhdXHJcblx0cGFyYW0uU3RyaW5nIGMwK3IwK2MxK3IxXHJcbmFzcyBcImUyZTRcIiwgdG9VQ0kgWzEyLDI4XVxyXG5cclxuZXhwb3J0IHRvT2JqZWN0Tm90YXRpb24gPSAoW2Zyb20sdG9dKSA9PlxyXG5cdHBhcmFtLkludGVnZXIgZnJvbVxyXG5cdHBhcmFtLkludGVnZXIgdG9cclxuXHR1Y2kgPSB0b1VDSSBbZnJvbSx0b11cclxuXHRmcm9tID0gdWNpLnNsaWNlIDAsMlxyXG5cdHRvID0gdWNpLnNsaWNlIDIsNFxyXG5cdHBhcmFtLk9iamVjdCB7ZnJvbSwgdG99XHJcbmFzcyB7ZnJvbTonZTInLCB0bzonZTQnfSwgdG9PYmplY3ROb3RhdGlvbiBbMTIsMjhdXHJcblxyXG5leHBvcnQgZW1wdHkgPSAobikgPT5cclxuXHRwYXJhbS5JbnRlZ2VyIG5cclxuXHRwYXJhbS5TdHJpbmcgKDErbi8vOCkudG9TdHJpbmcoKVxyXG5cclxudW5kbyA9ID0+IFxyXG5cdGlmIGdsb2JhbC5zdGFjay5sZW5ndGggPT0gMCB0aGVuIHJldHVyblxyXG5cdGdsb2JhbC5jaGVzcy51bmRvKClcclxuXHRnbG9iYWwuY3Vyck5vZGUgPSBnbG9iYWwuc3RhY2sucG9wKClcclxuXHQjIG1ha2VDaGlsZHJlbigpXHJcblxyXG5leHBvcnQgZHVtcFN0YXRlID0gPT5cclxuXHRjb25zb2xlLmxvZyAnU1RBVEUgIyMjIyMjIyMnXHJcblx0Y29uc29sZS5sb2cgJyAgc3RhY2snLGdsb2JhbC5zdGFja1xyXG5cdGNvbnNvbGUubG9nICcgIGN1cnJOb2RlJyxnbG9iYWwuY3Vyck5vZGVcclxuXHRjb25zb2xlLmxvZyAnICBoaXN0b3J5JyxnbG9iYWwuY2hlc3MuaGlzdG9yeSgpXHJcblxyXG5saW5rID0gPT4gJ2h0dHBzOi8vbGljaGVzcy5vcmcvYW5hbHlzaXMvJyArIGdsb2JhbC5jaGVzcy5mZW4oKVxyXG5cclxuY29ycmVjdEFuc3dlciA9ID0+XHJcblx0Z2xvYmFsLnNwYWNlZFJlcGV0aXRpb24uY29ycmVjdCgpXHJcblx0Z2V0TmV4dFF1ZXN0aW9uKClcclxuXHJcbndyb25nQW5zd2VyID0gPT5cclxuXHRnbG9iYWwuc3BhY2VkUmVwZXRpdGlvbi53cm9uZygpXHJcblx0Z2V0TmV4dFF1ZXN0aW9uKClcclxuXHJcbmdldE5leHRRdWVzdGlvbiA9ID0+XHJcblx0ZyA9IGdsb2JhbFxyXG5cdHNyID0gZy5zcGFjZWRSZXBldGl0aW9uXHJcblx0aWYgc3IuYm94ZXNbMF0ubGVuZ3RoID09IDBcclxuXHRcdGZvciBpIGluIHJhbmdlIDVcclxuXHRcdFx0aWYgZy5pbmRleCA8IGcucXVlc3Rpb25zLmxlbmd0aC0xXHJcblx0XHRcdFx0cWkgPSBnLnF1ZXN0aW9uc1tnLmluZGV4XVxyXG5cdFx0XHRcdHNyLmFkZCB7cDpnLnRyZWUuYXJyW3FpXVszXSwgcTpnLnRyZWUuZ2V0UGF0aChxaSksIGE6IGcudHJlZS5nZXRBbnN3ZXJzKHFpLGcuc3RvcHApfVxyXG5cdFx0XHRcdGcuaW5kZXgrK1xyXG5cdHNyLnBpY2soKVxyXG5cdGcuY2hlc3MucmVzZXQoKVxyXG5cdG1vdmVzID0gc3IuY3VycmVudCgpLnEuc3BsaXQgJy4nXHJcblx0Zm9yIG1vdmUgaW4gbW92ZXNcclxuXHRcdGcuY2hlc3MubW92ZSB7ZnJvbTogbW92ZS5zbGljZSgwLDIpLCB0bzptb3ZlLnNsaWNlKDIsNCl9XHJcblx0Zy5ib2FyZC5mbGlwcGVkID0gbW92ZXMubGVuZ3RoJTIgPT0gMVxyXG5cclxuZXhwb3J0IGNsaWNrU3RyaW5nID0gKGtleSkgPT5cclxuXHRwYXJhbS5TdHJpbmcga2V5XHJcblx0ZyA9IGdsb2JhbFxyXG5cdGlmIGtleSA9PSAnZmxpcCcgdGhlbiBnLmJvYXJkLmZsaXAoKVxyXG5cdGVsc2UgaWYga2V5ID09ICdsaW5rJyB0aGVuIHdpbmRvdy5vcGVuIGxpbmsoKSwgJ19ibGFuaydcclxuXHRlbHNlIGlmIGtleSA9PSAndXAnICAgdGhlbiBnLmNoaWxkID0gKGcuY2hpbGQtMSkgJSUgZy5jaGlsZHJlbi5sZW5ndGhcclxuXHRlbHNlIGlmIGtleSA9PSAnZG93bicgdGhlbiBnLmNoaWxkID0gKGcuY2hpbGQrMSkgJSUgZy5jaGlsZHJlbi5sZW5ndGhcclxuXHRlbHNlIGlmIGtleSA9PSAndW5kbycgdGhlbiB1bmRvKClcclxuXHRlbHNlIGlmIGtleSA9PSAnbGVmdCcgdGhlbiB1bmRvKClcclxuXHRlbHNlIGlmIGtleSA9PSAncmlnaHQnXHJcblx0XHRjb25zb2xlLmxvZyBnLmNoaWxkcmVuLGcuY2hpbGRcclxuXHRcdFt2YWx1ZSxzYW4sdWNpXSA9IGcuY2hpbGRyZW5bZy5jaGlsZF1cclxuXHRcdGNvbnNvbGUubG9nICdtb3ZlJyxbdmFsdWUsc2FuLHVjaV1cclxuXHRcdGcuY2hlc3MubW92ZSBzYW5cclxuXHRcdGcuc3RhY2sucHVzaCBnLmN1cnJOb2RlXHJcblx0XHRnLmN1cnJOb2RlID0gZy5jdXJyTm9kZVt1Y2ldXHJcblx0XHRtYWtlQ2hpbGRyZW4oKVxyXG5cdGVsc2UgaWYga2V5ID09ICdzYXZlJyB0aGVuIGRvd25sb2FkIGcudHJlZSwgZy5uYW1lICsgJy5qc29uJ1xyXG5cdGVsc2UgaWYga2V5ID09ICdjb3JyZWN0JyB0aGVuIGNvcnJlY3RBbnN3ZXIoKVxyXG5cdGVsc2UgaWYga2V5ID09ICd3cm9uZycgdGhlbiB3cm9uZ0Fuc3dlcigpXHJcblx0ZWxzZSBjb25zb2xlLmxvZyAndW5rbm93biBrZXkgaW4gY2xpY2tTdHJpbmcnLGtleVxyXG4iXX0=
//# sourceURL=c:\github\2023-022-ChessOpenings-SpacedRepetition\coffee\globals.coffee