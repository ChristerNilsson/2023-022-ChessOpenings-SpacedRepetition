// Generated by CoffeeScript 2.5.1
var f, g, link, sortera, undo,
  modulo = function(a, b) { return (+a % (b = +b) + b) % b; },
  indexOf = [].indexOf;

import {
  ass,
  log,
  range,
  split,
  param,
  hexToBase64,
  spaceShip
} from '../js/utils.js';

import {
  Button
} from '../js/button.js';

import _ from 'https://cdn.skypack.dev/lodash';

import cryptoJs from 'https://cdn.skypack.dev/crypto-js';

import {
  download
} from '../js/download.js';

export var global = {
  //name : 'bishop',
  name: 'tree',
  version: 'ver: B',
  board: null,
  child: 0, // move under consideration
  children: [], // sorted list of [value,san,uci]
  SIZE: 50, // of square
  pics: {}, // 12 pjäser
  data: null,
  buttons: [],
  database: {}, // fen => value
  currTree: 0, // index till träden
  currNode: null, // pekar in i ett träd
  count: 0, // räknar antal nya drag i trädet
  stack: [] // innehåller aktuell gren
};

export var coords = (uci) => {
  var c0, c1, r0, r1;
  param.String(uci);
  c0 = "abcdefgh".indexOf(uci[0]);
  r0 = "12345678".indexOf(uci[1]);
  c1 = "abcdefgh".indexOf(uci[2]);
  r1 = "12345678".indexOf(uci[3]);
  return param.Array([c0 + 8 * r0, c1 + 8 * r1]);
};

ass([8, 24], coords("a2a4"));

export var toUCI = ([from, to]) => {
  var c0, c1, r0, r1;
  param.Integer(from);
  param.Integer(to);
  c0 = "abcdefgh"[from % 8];
  r0 = "12345678"[Math.floor(from / 8)];
  c1 = "abcdefgh"[to % 8];
  r1 = "12345678"[Math.floor(to / 8)];
  return param.String(c0 + r0 + c1 + r1);
};

ass("e2e4", toUCI([12, 28]));

export var toObjectNotation = ([from, to]) => {
  var uci;
  param.Integer(from);
  param.Integer(to);
  uci = toUCI([from, to]);
  from = uci.slice(0, 2);
  to = uci.slice(2, 4);
  return param.Object({from, to});
};

ass({
  from: 'e2',
  to: 'e4'
}, toObjectNotation([12, 28]));

export var empty = (n) => {
  param.Integer(n);
  return param.String((1 + Math.floor(n / 8)).toString());
};

undo = () => {
  if (global.stack.length === 0) {
    return;
  }
  global.chess.undo();
  global.currNode = global.stack.pop();
  return makeChildren();
};

export var dumpState = () => {
  console.log('STATE ########');
  console.log('  stack', global.stack);
  console.log('  currNode', global.currNode);
  return console.log('  history', global.chess.history());
};

export var makeChildren = () => {
  var base64, fen, i, j, key, keys, len, pair, ref, san, value;
  console.log('makeChildren');
  keys = _.keys(global.currNode);
  global.children = [];
  ref = range(keys.length);
  for (j = 0, len = ref.length; j < len; j++) {
    i = ref[j];
    key = keys[i];
    pair = coords(key);
    global.chess.move(toObjectNotation(pair));
    fen = global.chess.fen();
    san = _.last(global.chess.history());
    base64 = hexToBase64(cryptoJs.SHA256(fen).toString()).slice(0, 8);
    value = global.database[base64] === null ? "?99" : global.database[base64];
    global.children.push([value, san, key]);
    console.log(key, san, base64, value, fen);
    global.chess.undo();
  }
  global.children = sortera(global.children);
  if (modulo(global.stack.length, 2) === 0) {
    global.children.reverse();
  }
  global.child = 0;
  return console.log('children', global.children);
};

sortera = (arr) => { // Hanterar ej mattar av olika längd. 
  // #1 och #2 ersätts båda med 9999
  // #-1 och #-2 ersätts båda med -9999
  // Bör: #1 > #2
  // Är: #1 == #2
  param.Array(arr);
  arr = _.map(arr, ([a, b, c]) => {
    if (typeof a === 'number') {
      return [a, b, c];
    }
    if (indexOf.call(a, '-') >= 0) {
      return [-9999, b, c];
    } else {
      return [9999, b, c];
    }
  });
  return arr.sort((a, b) => {
    return spaceShip(a[0], b[0]);
  });
};

ass([[2, "Nf3", "g1f3"], [11, "e4", "e2e4"]], sortera([[11, "e4", "e2e4"], [2, "Nf3", "g1f3"]]));

ass([[-9999, "Nf3", "g1f3"], [9999, "e4", "e2e4"]], sortera([["#1", "e4", "e2e4"], ["#-2", "Nf3", "g1f3"]]));

ass([[-9999, "Nf3", "g1f3"], [11, "e4", "e2e4"]], sortera([[11, "e4", "e2e4"], ["#-2", "Nf3", "g1f3"]]));

export var loadTree = (delta) => {
  param.Test(delta === (-1) || delta === 0 || delta === 1);
  global.currTree = modulo(global.currTree + delta, _.size(global.trees));
  global.currNode = global.tree; //.moves[""]
  global.stack = [];
  return makeChildren();
};

g = (item) => {
  // param.Integer item or param.String
  if (indexOf.call(item, "#-") >= 0) {
    return -1000;
  }
  if (indexOf.call(item, "#") >= 0) {
    return 1000;
  }
  return param.Integer(parseInt(item));
};

f = (arrScore, c) => {
  var a, b, d;
  param.Array(arrScore);
  param.String(c);
  arrScore = _.map(arrScore, (item) => {
    return g(item);
  });
  a = _.min(arrScore);
  b = _.max(arrScore);
  c = g(c);
  d = _.max([Math.abs(a), Math.abs(b)]);
  a = -d;
  return param.Number((c - a) / (2 * d));
};

ass(0, f([-100, 50], '-100'));

ass(0.75, f([-100, 50], '50'));

ass(1, f([-100, 50], '100'));

link = () => {
  return 'https://lichess.org/analysis/' + global.chess.fen();
};

export var clickString = (key) => {
  var san, uci, value;
  param.String(key);
  if (key === 'flip') {
    return global.board.flip();
  } else if (key === 'link') {
    return window.open(link(), '_blank');
  } else if (key === 'up') {
    return global.child = modulo(global.child - 1, global.children.length);
  } else if (key === 'down') {
    return global.child = modulo(global.child + 1, global.children.length);
  } else if (key === 'undo') {
    return undo();
  } else if (key === 'left') {
    return undo();
  } else if (key === 'right') {
    console.log(global.children, global.child);
    [value, san, uci] = global.children[global.child];
    console.log('move', [value, san, uci]);
    global.chess.move(san);
    global.stack.push(global.currNode);
    global.currNode = global.currNode[uci];
    return makeChildren();
  } else if (key === 'save') {
    return download(global.tree, global.name + '.json');
  } else {
    return console.log('unknown key in clickString', key);
  }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2xvYmFscy5qcyIsInNvdXJjZVJvb3QiOiIuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxnbG9iYWxzLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsSUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLElBQUEsRUFBQSxPQUFBLEVBQUEsSUFBQTtFQUFBOzs7QUFBQSxPQUFBO0VBQVEsR0FBUjtFQUFZLEdBQVo7RUFBZ0IsS0FBaEI7RUFBc0IsS0FBdEI7RUFBNEIsS0FBNUI7RUFBa0MsV0FBbEM7RUFBOEMsU0FBOUM7Q0FBQSxNQUFBOztBQUNBLE9BQUE7RUFBUSxNQUFSO0NBQUEsTUFBQTs7QUFDQSxPQUFPLENBQVAsTUFBQTs7QUFDQSxPQUFPLFFBQVAsTUFBQTs7QUFDQSxPQUFBO0VBQVEsUUFBUjtDQUFBLE1BQUE7O0FBRUEsT0FBQSxJQUFPLE1BQUEsR0FBUyxDQUFBOztFQUdmLElBQUEsRUFBTyxNQUhRO0VBS2YsT0FBQSxFQUFRLFFBTE87RUFNZixLQUFBLEVBQU0sSUFOUztFQU9mLEtBQUEsRUFBTSxDQVBTO0VBUWYsUUFBQSxFQUFVLEVBUks7RUFTZixJQUFBLEVBQUssRUFUVTtFQVVmLElBQUEsRUFBSyxDQUFBLENBVlU7RUFXZixJQUFBLEVBQUssSUFYVTtFQVlmLE9BQUEsRUFBUSxFQVpPO0VBYWYsUUFBQSxFQUFVLENBQUEsQ0FiSztFQWNmLFFBQUEsRUFBUyxDQWRNO0VBZWYsUUFBQSxFQUFTLElBZk07RUFnQmYsS0FBQSxFQUFPLENBaEJRO0VBaUJmLEtBQUEsRUFBTSxFQWpCUztBQUFBOztBQW9CaEIsT0FBQSxJQUFPLE1BQUEsR0FBUyxDQUFDLEdBQUQsQ0FBQSxHQUFBO0FBQ2hCLE1BQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUE7RUFBQyxLQUFLLENBQUMsTUFBTixDQUFhLEdBQWI7RUFDQSxFQUFBLEdBQUssVUFBVSxDQUFDLE9BQVgsQ0FBbUIsR0FBRyxDQUFDLENBQUQsQ0FBdEI7RUFDTCxFQUFBLEdBQUss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QVosRUFBbUIsQ0FBQyxLQUFELEVBQU8sR0FBUCxFQUFXLEdBQVgsQ0FBbkI7SUFDQSxNQUFNLENBQUMsS0FBSyxDQUFDLElBQWIsQ0FBa0IsR0FBbEI7SUFDQSxNQUFNLENBQUMsS0FBSyxDQUFDLElBQWIsQ0FBa0IsTUFBTSxDQUFDLFFBQXpCO0lBQ0EsTUFBTSxDQUFDLFFBQVAsR0FBa0IsTUFBTSxDQUFDLFFBQVEsQ0FBQyxHQUFEO1dBQ2pDLFlBQUEsQ0FBQSxFQVBJO0dBQUEsTUFRQSxJQUFHLEdBQUEsS0FBTyxNQUFWO1dBQXNCLFFBQUEsQ0FBUyxNQUFNLENBQUMsSUFBaEIsRUFBc0IsTUFBTSxDQUFDLElBQVAsR0FBYyxPQUFwQyxFQUF0QjtHQUFBLE1BQUE7V0FDQSxPQUFPLENBQUMsR0FBUixDQUFZLDRCQUFaLEVBQXlDLEdBQXpDLEVBREE7O0FBaEJlIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHthc3MsbG9nLHJhbmdlLHNwbGl0LHBhcmFtLGhleFRvQmFzZTY0LHNwYWNlU2hpcH0gZnJvbSAnLi4vanMvdXRpbHMuanMnXHJcbmltcG9ydCB7QnV0dG9ufSBmcm9tICcuLi9qcy9idXR0b24uanMnXHJcbmltcG9ydCBfIGZyb20gJ2h0dHBzOi8vY2RuLnNreXBhY2suZGV2L2xvZGFzaCdcclxuaW1wb3J0IGNyeXB0b0pzIGZyb20gJ2h0dHBzOi8vY2RuLnNreXBhY2suZGV2L2NyeXB0by1qcydcclxuaW1wb3J0IHtkb3dubG9hZH0gZnJvbSAnLi4vanMvZG93bmxvYWQuanMnXHJcblxyXG5leHBvcnQgZ2xvYmFsID0ge1xyXG5cclxuXHQjbmFtZSA6ICdiaXNob3AnLFxyXG5cdG5hbWUgOiAndHJlZScsXHJcblxyXG5cdHZlcnNpb246J3ZlcjogQicsXHJcblx0Ym9hcmQ6bnVsbCxcclxuXHRjaGlsZDowLCAjIG1vdmUgdW5kZXIgY29uc2lkZXJhdGlvblxyXG5cdGNoaWxkcmVuOiBbXSwgIyBzb3J0ZWQgbGlzdCBvZiBbdmFsdWUsc2FuLHVjaV1cclxuXHRTSVpFOjUwLCAjIG9mIHNxdWFyZVxyXG5cdHBpY3M6e30sICMgMTIgcGrDpHNlclxyXG5cdGRhdGE6bnVsbCxcclxuXHRidXR0b25zOltdLFxyXG5cdGRhdGFiYXNlOiB7fSwgIyBmZW4gPT4gdmFsdWVcclxuXHRjdXJyVHJlZTowLCAjIGluZGV4IHRpbGwgdHLDpGRlblxyXG5cdGN1cnJOb2RlOm51bGwsICMgcGVrYXIgaW4gaSBldHQgdHLDpGRcclxuXHRjb3VudDogMCwgIyByw6RrbmFyIGFudGFsIG55YSBkcmFnIGkgdHLDpGRldFxyXG5cdHN0YWNrOltdICMgaW5uZWjDpWxsZXIgYWt0dWVsbCBncmVuXHJcbn1cclxuXHJcbmV4cG9ydCBjb29yZHMgPSAodWNpKSA9PlxyXG5cdHBhcmFtLlN0cmluZyB1Y2lcclxuXHRjMCA9IFwiYWJjZGVmZ2hcIi5pbmRleE9mIHVjaVswXVxyXG5cdHIwID0gXCIxMjM0NTY3OFwiLmluZGV4T2YgdWNpWzFdXHJcblx0YzEgPSBcImFiY2RlZmdoXCIuaW5kZXhPZiB1Y2lbMl1cclxuXHRyMSA9IFwiMTIzNDU2NzhcIi5pbmRleE9mIHVjaVszXVxyXG5cdHBhcmFtLkFycmF5IFtjMCs4KnIwLCBjMSs4KnIxXVxyXG5hc3MgWzgsMjRdLCBjb29yZHMgXCJhMmE0XCJcclxuXHJcbmV4cG9ydCB0b1VDSSA9IChbZnJvbSx0b10pID0+XHJcblx0cGFyYW0uSW50ZWdlciBmcm9tXHJcblx0cGFyYW0uSW50ZWdlciB0b1xyXG5cdGMwID0gXCJhYmNkZWZnaFwiW2Zyb20lOF1cclxuXHRyMCA9IFwiMTIzNDU2NzhcIltmcm9tLy84XVxyXG5cdGMxID0gXCJhYmNkZWZnaFwiW3RvJThdXHJcblx0cjEgPSBcIjEyMzQ1Njc4XCJbdG8vLzhdXHJcblx0cGFyYW0uU3RyaW5nIGMwK3IwK2MxK3IxXHJcbmFzcyBcImUyZTRcIiwgdG9VQ0kgWzEyLDI4XVxyXG5cclxuZXhwb3J0IHRvT2JqZWN0Tm90YXRpb24gPSAoW2Zyb20sdG9dKSA9PlxyXG5cdHBhcmFtLkludGVnZXIgZnJvbVxyXG5cdHBhcmFtLkludGVnZXIgdG9cclxuXHR1Y2kgPSB0b1VDSSBbZnJvbSx0b11cclxuXHRmcm9tID0gdWNpLnNsaWNlIDAsMlxyXG5cdHRvID0gdWNpLnNsaWNlIDIsNFxyXG5cdHBhcmFtLk9iamVjdCB7ZnJvbSwgdG99XHJcbmFzcyB7ZnJvbTonZTInLCB0bzonZTQnfSwgdG9PYmplY3ROb3RhdGlvbiBbMTIsMjhdXHJcblxyXG5leHBvcnQgZW1wdHkgPSAobikgPT5cclxuXHRwYXJhbS5JbnRlZ2VyIG5cclxuXHRwYXJhbS5TdHJpbmcgKDErbi8vOCkudG9TdHJpbmcoKVxyXG5cclxudW5kbyA9ID0+IFxyXG5cdGlmIGdsb2JhbC5zdGFjay5sZW5ndGggPT0gMCB0aGVuIHJldHVyblxyXG5cdGdsb2JhbC5jaGVzcy51bmRvKClcclxuXHRnbG9iYWwuY3Vyck5vZGUgPSBnbG9iYWwuc3RhY2sucG9wKClcclxuXHRtYWtlQ2hpbGRyZW4oKVxyXG5cclxuZXhwb3J0IGR1bXBTdGF0ZSA9ID0+XHJcblx0Y29uc29sZS5sb2cgJ1NUQVRFICMjIyMjIyMjJ1xyXG5cdGNvbnNvbGUubG9nICcgIHN0YWNrJyxnbG9iYWwuc3RhY2tcclxuXHRjb25zb2xlLmxvZyAnICBjdXJyTm9kZScsZ2xvYmFsLmN1cnJOb2RlXHJcblx0Y29uc29sZS5sb2cgJyAgaGlzdG9yeScsZ2xvYmFsLmNoZXNzLmhpc3RvcnkoKVxyXG5cclxuZXhwb3J0IG1ha2VDaGlsZHJlbiA9ID0+XHJcblx0Y29uc29sZS5sb2cgJ21ha2VDaGlsZHJlbidcclxuXHRrZXlzID0gXy5rZXlzIGdsb2JhbC5jdXJyTm9kZVxyXG5cdGdsb2JhbC5jaGlsZHJlbiA9IFtdXHJcblx0Zm9yIGkgaW4gcmFuZ2Uga2V5cy5sZW5ndGhcclxuXHRcdGtleSA9IGtleXNbaV1cclxuXHRcdHBhaXIgPSBjb29yZHMga2V5XHJcblx0XHRnbG9iYWwuY2hlc3MubW92ZSB0b09iamVjdE5vdGF0aW9uIHBhaXJcclxuXHRcdGZlbiA9IGdsb2JhbC5jaGVzcy5mZW4oKVxyXG5cdFx0c2FuID0gXy5sYXN0IGdsb2JhbC5jaGVzcy5oaXN0b3J5KClcclxuXHRcdGJhc2U2NCA9IGhleFRvQmFzZTY0KGNyeXB0b0pzLlNIQTI1NihmZW4pLnRvU3RyaW5nKCkpLnNsaWNlIDAsOFxyXG5cdFx0dmFsdWUgPSBpZiBnbG9iYWwuZGF0YWJhc2VbYmFzZTY0XSA9PSBudWxsIHRoZW4gXCI/OTlcIiBlbHNlIGdsb2JhbC5kYXRhYmFzZVtiYXNlNjRdXHJcblx0XHRnbG9iYWwuY2hpbGRyZW4ucHVzaCBbdmFsdWUsc2FuLGtleV1cclxuXHRcdGNvbnNvbGUubG9nIGtleSwgc2FuLCBiYXNlNjQsIHZhbHVlLCBmZW5cclxuXHRcdGdsb2JhbC5jaGVzcy51bmRvKClcclxuXHRnbG9iYWwuY2hpbGRyZW4gPSBzb3J0ZXJhIGdsb2JhbC5jaGlsZHJlblxyXG5cdGlmIGdsb2JhbC5zdGFjay5sZW5ndGglJTI9PTAgdGhlbiBnbG9iYWwuY2hpbGRyZW4ucmV2ZXJzZSgpXHJcblx0Z2xvYmFsLmNoaWxkID0gMFxyXG5cdGNvbnNvbGUubG9nICdjaGlsZHJlbicsZ2xvYmFsLmNoaWxkcmVuXHJcblxyXG5zb3J0ZXJhID0gKGFycikgPT4gIyBIYW50ZXJhciBlaiBtYXR0YXIgYXYgb2xpa2EgbMOkbmdkLiBcclxuXHQjICMxIG9jaCAjMiBlcnPDpHR0cyBiw6VkYSBtZWQgOTk5OVxyXG5cdCMgIy0xIG9jaCAjLTIgZXJzw6R0dHMgYsOlZGEgbWVkIC05OTk5XHJcblx0IyBCw7ZyOiAjMSA+ICMyXHJcblx0IyDDhHI6ICMxID09ICMyXHJcblx0cGFyYW0uQXJyYXkgYXJyXHJcblx0YXJyID0gXy5tYXAgYXJyLCAoW2EsYixjXSkgPT4gXHJcblx0XHRpZiB0eXBlb2YgYT09J251bWJlcicgdGhlbiByZXR1cm4gW2EsYixjXVxyXG5cdFx0aWYgJy0nIGluIGEgdGhlbiByZXR1cm4gWy05OTk5LGIsY10gZWxzZSByZXR1cm4gWzk5OTksYixjXVxyXG5cdGFyci5zb3J0IChhLGIpID0+IHNwYWNlU2hpcCBhWzBdLGJbMF1cclxuYXNzIFtbMixcIk5mM1wiLFwiZzFmM1wiXSxbMTEsXCJlNFwiLFwiZTJlNFwiXV0sIHNvcnRlcmEgW1sxMSxcImU0XCIsXCJlMmU0XCJdLFsyLFwiTmYzXCIsXCJnMWYzXCJdXVxyXG5hc3MgW1stOTk5OSxcIk5mM1wiLFwiZzFmM1wiXSxbOTk5OSxcImU0XCIsXCJlMmU0XCJdXSwgc29ydGVyYSBbW1wiIzFcIixcImU0XCIsXCJlMmU0XCJdLFtcIiMtMlwiLFwiTmYzXCIsXCJnMWYzXCJdXVxyXG5hc3MgW1stOTk5OSxcIk5mM1wiLFwiZzFmM1wiXSxbMTEsXCJlNFwiLFwiZTJlNFwiXV0sIHNvcnRlcmEgW1sxMSxcImU0XCIsXCJlMmU0XCJdLFtcIiMtMlwiLFwiTmYzXCIsXCJnMWYzXCJdXVxyXG5cclxuZXhwb3J0IGxvYWRUcmVlID0gKGRlbHRhKSA9PlxyXG5cdHBhcmFtLlRlc3QgZGVsdGEgaW4gWy0xLDAsMV1cclxuXHRnbG9iYWwuY3VyclRyZWUgPSAoZ2xvYmFsLmN1cnJUcmVlK2RlbHRhKSAlJSBfLnNpemUgZ2xvYmFsLnRyZWVzXHJcblx0Z2xvYmFsLmN1cnJOb2RlID0gZ2xvYmFsLnRyZWUgIy5tb3Zlc1tcIlwiXVxyXG5cdGdsb2JhbC5zdGFjayA9IFtdXHJcblx0bWFrZUNoaWxkcmVuKClcclxuXHJcbmcgPSAoaXRlbSkgPT5cclxuXHQjIHBhcmFtLkludGVnZXIgaXRlbSBvciBwYXJhbS5TdHJpbmdcclxuXHRpZiBcIiMtXCIgaW4gaXRlbSB0aGVuIHJldHVybiAtMTAwMFxyXG5cdGlmIFwiI1wiIGluIGl0ZW0gdGhlbiByZXR1cm4gMTAwMFxyXG5cdHBhcmFtLkludGVnZXIgcGFyc2VJbnQgaXRlbVxyXG5cclxuZiA9IChhcnJTY29yZSxjKSA9PlxyXG5cdHBhcmFtLkFycmF5IGFyclNjb3JlXHJcblx0cGFyYW0uU3RyaW5nIGNcclxuXHRhcnJTY29yZSA9IF8ubWFwIGFyclNjb3JlLCAoaXRlbSkgPT4gZyBpdGVtXHJcblx0YSA9IF8ubWluIGFyclNjb3JlXHJcblx0YiA9IF8ubWF4IGFyclNjb3JlXHJcblx0YyA9IGcgY1xyXG5cdGQgPSBfLm1heCBbTWF0aC5hYnMoYSksTWF0aC5hYnMoYildXHJcblx0YSA9IC1kXHJcblx0cGFyYW0uTnVtYmVyIChjLWEpLygyKmQpXHJcbmFzcyAwLCBmIFstMTAwLDUwXSwnLTEwMCdcclxuYXNzIDAuNzUsIGYgWy0xMDAsNTBdLCc1MCdcclxuYXNzIDEsIGYgWy0xMDAsNTBdLCcxMDAnXHJcblxyXG5saW5rID0gPT4gJ2h0dHBzOi8vbGljaGVzcy5vcmcvYW5hbHlzaXMvJyArIGdsb2JhbC5jaGVzcy5mZW4oKVxyXG5cclxuZXhwb3J0IGNsaWNrU3RyaW5nID0gKGtleSkgPT5cclxuXHRwYXJhbS5TdHJpbmcga2V5XHJcblx0aWYga2V5ID09ICdmbGlwJyB0aGVuIGdsb2JhbC5ib2FyZC5mbGlwKClcclxuXHRlbHNlIGlmIGtleSA9PSAnbGluaycgdGhlbiB3aW5kb3cub3BlbiBsaW5rKCksICdfYmxhbmsnXHJcblx0ZWxzZSBpZiBrZXkgPT0gJ3VwJyAgIHRoZW4gZ2xvYmFsLmNoaWxkID0gKGdsb2JhbC5jaGlsZC0xKSAlJSBnbG9iYWwuY2hpbGRyZW4ubGVuZ3RoXHJcblx0ZWxzZSBpZiBrZXkgPT0gJ2Rvd24nIHRoZW4gZ2xvYmFsLmNoaWxkID0gKGdsb2JhbC5jaGlsZCsxKSAlJSBnbG9iYWwuY2hpbGRyZW4ubGVuZ3RoXHJcblx0ZWxzZSBpZiBrZXkgPT0gJ3VuZG8nIHRoZW4gdW5kbygpXHJcblx0ZWxzZSBpZiBrZXkgPT0gJ2xlZnQnIHRoZW4gdW5kbygpXHJcblx0ZWxzZSBpZiBrZXkgPT0gJ3JpZ2h0J1xyXG5cdFx0Y29uc29sZS5sb2cgZ2xvYmFsLmNoaWxkcmVuLGdsb2JhbC5jaGlsZFxyXG5cdFx0W3ZhbHVlLHNhbix1Y2ldID0gZ2xvYmFsLmNoaWxkcmVuW2dsb2JhbC5jaGlsZF1cclxuXHRcdGNvbnNvbGUubG9nICdtb3ZlJyxbdmFsdWUsc2FuLHVjaV1cclxuXHRcdGdsb2JhbC5jaGVzcy5tb3ZlIHNhblxyXG5cdFx0Z2xvYmFsLnN0YWNrLnB1c2ggZ2xvYmFsLmN1cnJOb2RlXHJcblx0XHRnbG9iYWwuY3Vyck5vZGUgPSBnbG9iYWwuY3Vyck5vZGVbdWNpXVxyXG5cdFx0bWFrZUNoaWxkcmVuKClcclxuXHRlbHNlIGlmIGtleSA9PSAnc2F2ZScgdGhlbiBkb3dubG9hZCBnbG9iYWwudHJlZSwgZ2xvYmFsLm5hbWUgKyAnLmpzb24nXHJcblx0ZWxzZSBjb25zb2xlLmxvZyAndW5rbm93biBrZXkgaW4gY2xpY2tTdHJpbmcnLGtleVxyXG4iXX0=
//# sourceURL=c:\github\2023-022-ChessOpenings-SpacedRepetition\coffee\globals.coffee