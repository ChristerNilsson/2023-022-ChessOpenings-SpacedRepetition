// Generated by CoffeeScript 2.5.1
var SIZE, arr, drawSpacedRepetition, released, xdraw;

import _ from 'https://cdn.skypack.dev/lodash';

import {
  ass,
  log,
  range
} from '../js/utils.js';

import {
  Board
} from '../js/board.js';

import {
  Button
} from '../js/button.js';

import {
  clickString,
  global
} from '../js/globals.js';

import {
  SpacedRepetition
} from '../js/spaced_repetition.js';

import {
  Tree
} from '../js/tree.js';

SIZE = global.SIZE;

released = true; // prevention of touch bounce

arr = null;

window.preload = () => {
  var j, k, len, len1, letter, ref, ref1, results;
  //arr = loadJSON './data/arr-2014-08.json' # SIZE = 0
  //arr = loadJSON './data/arr-2016-02.json' # SIZE = 1
  //arr = loadJSON './data/arr-2019-06.json' # SIZE = 2
  arr = loadJSON('./data/arr32.json');
  ref = "rnbqkp";
  for (j = 0, len = ref.length; j < len; j++) {
    letter = ref[j];
    global.pics[letter] = loadImage('./images/b' + letter + '.png');
  }
  ref1 = "RNBQKP";
  results = [];
  for (k = 0, len1 = ref1.length; k < len1; k++) {
    letter = ref1[k];
    results.push(global.pics[letter] = loadImage('./images/w' + letter.toLowerCase() + '.png'));
  }
  return results;
};

window.setup = () => {
  var g, i, index, j, k, l, len, len1, len2, move, moves, ref, ref1, sr, start;
  createCanvas(SIZE * 10.3, SIZE * 11);
  textAlign(CENTER, CENTER);
  rectMode(CENTER);
  g = global;
  g.tree = new Tree(arr.arr);
  g.board = new Board();
  g.chess = new Chess();
  // g.tree.test()
  g.spacedRepetition = new SpacedRepetition('e2e4.e7e5.g1f3.b8c6.f1c4');
  sr = g.spacedRepetition;
  g.start = g.tree.getStart(sr.path);
  g.stopp = g.tree.getStopp(sr.path, g.start);
  console.log('start', g.start, 'stopp', g.stopp);
  start = new Date();
  g.questions = g.tree.getQuestions(g.start, g.stopp); // array med index till stora arrayen
  console.log('getQuestions', g.questions, new Date() - start);
  ref = range(10);
  for (j = 0, len = ref.length; j < len; j++) {
    i = ref[j];
    index = g.questions[i];
    console.log(index, g.tree.arr[index][3], g.tree.getPath(index));
  }
  g.index = 0;
  g.path = g.tree.getPath(g.questions[g.index]);
  g.answers = g.tree.getAnswers(g.questions[g.index], g.stopp);
  console.log('getAnswers', g.answers);
  ref1 = range(5);
  for (k = 0, len1 = ref1.length; k < len1; k++) {
    i = ref1[k];
    sr.add({
      p: g.tree.arr[g.questions[g.index]][3],
      q: g.tree.getPath(g.questions[g.index]),
      a: g.tree.getAnswers(g.questions[g.index], g.stopp)
    });
    g.index++;
  }
  sr.pick();
  g.chess.reset();
  moves = sr.current().q.split('.');
  for (l = 0, len2 = moves.length; l < len2; l++) {
    move = moves[l];
    g.chess.move({
      from: move.slice(0, 2),
      to: move.slice(2, 4)
    });
  }
  g.board.flipped = moves.length % 2 === 1;
  return xdraw();
};

drawSpacedRepetition = () => {
  var answer, box, current, g, i, j, k, l, len, len1, len2, move, ref, ref1, ref2, sr, x, y;
  g = global;
  sr = g.spacedRepetition;
  textAlign(LEFT, CENTER);
  ref = sr.boxes;
  for (i = j = 0, len = ref.length; j < len; i = ++j) {
    box = ref[i];
    fill(i === sr.index ? 'white' : 'black');
    text(box.length, 40 + 40 * i, 500);
  }
  text('index ' + sr.index, 220, 500);
  text('start ' + g.start, 390, 500);
  current = sr.current();
  if (current) {
    ref1 = g.chess.history();
    for (i = k = 0, len1 = ref1.length; k < len1; i = ++k) {
      move = ref1[i];
      x = 450 + i % 2 * 35;
      y = 35 + floor(i / 2) * 20;
      fill('black');
      if (i % 2 === 0) {
        text(i / 2 + 1, x - 20, y);
      }
      fill(i < sr.path.split('.').length ? 'lightgray' : ['white', 'black'][i % 2]);
      text(move, x, y);
    }
    text('questions.length ' + g.questions.length, 200, 520);
    // text 'popularity '+g.tree.arr[g.questions[sr.index]][3], 390,520
    text('popularity ' + current.p, 390, 520);
    ref2 = current.a;
    for (i = l = 0, len2 = ref2.length; l < len2; i = ++l) {
      answer = ref2[i];
      text(answer, 40 + 40 * i, 540);
    }
  }
  //		text current.a[0][0], 40,540
  return text('arr.length ' + g.tree.arr.length, 40, 520);
};

xdraw = () => {
  var button, j, len, ref;
  background('gray');
  textSize(SIZE);
  global.board.draw();
  ref = global.buttons;
  for (j = 0, len = ref.length; j < len; j++) {
    button = ref[j];
    button.draw();
  }
  return drawSpacedRepetition();
};

// window.keyPressed = =>
// 	if key == 'ArrowLeft' then clickString 'left'
// 	if key == 'ArrowRight'  then clickString 'right'
// 	if key == 'ArrowUp'  then clickString 'up'
// 	if key == 'ArrowDown' then clickString 'down'
// 	if key == ' ' then clickString 'flip'
// 	if key == 'Home' then clickString 'first'
// 	xdraw()
// 	return false
window.mousePressed = () => {
  var button, j, k, len, len1, ref, ref1, square;
  if (!released) {
    return;
  }
  released = false;
  ref = global.buttons.concat(global.board.buttons);
  for (j = 0, len = ref.length; j < len; j++) {
    button = ref[j];
    if (button.inside(mouseX, mouseY)) {
      button.onclick();
      xdraw();
      return false;
    }
  }
  ref1 = global.board.squares;
  for (k = 0, len1 = ref1.length; k < len1; k++) {
    square = ref1[k];
    if (square.inside(mouseX, mouseY)) {
      square.onclick();
      xdraw();
      return false;
    }
  }
  return false;
};

window.mouseReleased = () => {
  released = true;
  return false;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsSUFBQSxFQUFBLEdBQUEsRUFBQSxvQkFBQSxFQUFBLFFBQUEsRUFBQTs7QUFBQSxPQUFPLENBQVAsTUFBQTs7QUFDQSxPQUFBO0VBQVEsR0FBUjtFQUFZLEdBQVo7RUFBZ0IsS0FBaEI7Q0FBQSxNQUFBOztBQUNBLE9BQUE7RUFBUSxLQUFSO0NBQUEsTUFBQTs7QUFDQSxPQUFBO0VBQVEsTUFBUjtDQUFBLE1BQUE7O0FBQ0EsT0FBQTtFQUFRLFdBQVI7RUFBb0IsTUFBcEI7Q0FBQSxNQUFBOztBQUNBLE9BQUE7RUFBUSxnQkFBUjtDQUFBLE1BQUE7O0FBQ0EsT0FBQTtFQUFRLElBQVI7Q0FBQSxNQUFBOztBQUVBLElBQUEsR0FBTyxNQUFNLENBQUM7O0FBQ2QsUUFBQSxHQUFXLEtBVFg7O0FBVUEsR0FBQSxHQUFNOztBQUVOLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLENBQUEsQ0FBQSxHQUFBO0FBQ2pCLE1BQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLE1BQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLE9BQUE7Ozs7RUFHQyxHQUFBLEdBQU0sUUFBQSxDQUFTLG1CQUFUO0FBRU47RUFBQSxLQUFBLHFDQUFBOztJQUNDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBRCxDQUFYLEdBQXNCLFNBQUEsQ0FBVSxZQUFBLEdBQWUsTUFBZixHQUF3QixNQUFsQztFQUR2QjtBQUVBO0FBQUE7RUFBQSxLQUFBLHdDQUFBOztpQkFDQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQUQsQ0FBWCxHQUFzQixTQUFBLENBQVUsWUFBQSxHQUFlLE1BQU0sQ0FBQyxXQUFQLENBQUEsQ0FBZixHQUFzQyxNQUFoRDtFQUR2QixDQUFBOztBQVJnQjs7QUFXakIsTUFBTSxDQUFDLEtBQVAs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eXBhY2suZGV2L2xvZGFzaCdcclxuaW1wb3J0IHthc3MsbG9nLHJhbmdlfSBmcm9tICcuLi9qcy91dGlscy5qcydcclxuaW1wb3J0IHtCb2FyZH0gZnJvbSAnLi4vanMvYm9hcmQuanMnXHJcbmltcG9ydCB7QnV0dG9ufSBmcm9tICcuLi9qcy9idXR0b24uanMnXHJcbmltcG9ydCB7Y2xpY2tTdHJpbmcsZ2xvYmFsfSBmcm9tICcuLi9qcy9nbG9iYWxzLmpzJ1xyXG5pbXBvcnQge1NwYWNlZFJlcGV0aXRpb259IGZyb20gJy4uL2pzL3NwYWNlZF9yZXBldGl0aW9uLmpzJ1xyXG5pbXBvcnQge1RyZWV9IGZyb20gJy4uL2pzL3RyZWUuanMnXHJcblxyXG5TSVpFID0gZ2xvYmFsLlNJWkVcclxucmVsZWFzZWQgPSB0cnVlICMgcHJldmVudGlvbiBvZiB0b3VjaCBib3VuY2VcclxuYXJyID0gbnVsbFxyXG5cclxud2luZG93LnByZWxvYWQgPSA9PlxyXG5cdCNhcnIgPSBsb2FkSlNPTiAnLi9kYXRhL2Fyci0yMDE0LTA4Lmpzb24nICMgU0laRSA9IDBcclxuXHQjYXJyID0gbG9hZEpTT04gJy4vZGF0YS9hcnItMjAxNi0wMi5qc29uJyAjIFNJWkUgPSAxXHJcblx0I2FyciA9IGxvYWRKU09OICcuL2RhdGEvYXJyLTIwMTktMDYuanNvbicgIyBTSVpFID0gMlxyXG5cdGFyciA9IGxvYWRKU09OICcuL2RhdGEvYXJyMzIuanNvbidcclxuXHJcblx0Zm9yIGxldHRlciBpbiBcInJuYnFrcFwiXHJcblx0XHRnbG9iYWwucGljc1tsZXR0ZXJdID0gbG9hZEltYWdlICcuL2ltYWdlcy9iJyArIGxldHRlciArICcucG5nJ1xyXG5cdGZvciBsZXR0ZXIgaW4gXCJSTkJRS1BcIlxyXG5cdFx0Z2xvYmFsLnBpY3NbbGV0dGVyXSA9IGxvYWRJbWFnZSAnLi9pbWFnZXMvdycgKyBsZXR0ZXIudG9Mb3dlckNhc2UoKSArICcucG5nJ1xyXG5cclxud2luZG93LnNldHVwID0gPT5cclxuXHRjcmVhdGVDYW52YXMgU0laRSoxMC4zLCBTSVpFKjExXHJcblx0dGV4dEFsaWduIENFTlRFUixDRU5URVJcclxuXHRyZWN0TW9kZSBDRU5URVJcclxuXHJcblx0ZyA9IGdsb2JhbFxyXG5cclxuXHRnLnRyZWUgPSBuZXcgVHJlZSBhcnIuYXJyXHJcblx0Zy5ib2FyZCA9IG5ldyBCb2FyZCgpXHJcblx0Zy5jaGVzcyA9IG5ldyBDaGVzcygpXHJcblx0IyBnLnRyZWUudGVzdCgpXHJcblxyXG5cdGcuc3BhY2VkUmVwZXRpdGlvbiA9IG5ldyBTcGFjZWRSZXBldGl0aW9uICdlMmU0LmU3ZTUuZzFmMy5iOGM2LmYxYzQnXHJcblx0c3IgPSBnLnNwYWNlZFJlcGV0aXRpb25cclxuXHRnLnN0YXJ0ID0gZy50cmVlLmdldFN0YXJ0IHNyLnBhdGhcclxuXHRnLnN0b3BwID0gZy50cmVlLmdldFN0b3BwIHNyLnBhdGgsZy5zdGFydFxyXG5cdGNvbnNvbGUubG9nICdzdGFydCcsZy5zdGFydCwgJ3N0b3BwJyxnLnN0b3BwXHJcblxyXG5cdHN0YXJ0ID0gbmV3IERhdGUoKVxyXG5cdGcucXVlc3Rpb25zID0gZy50cmVlLmdldFF1ZXN0aW9ucyBnLnN0YXJ0LGcuc3RvcHAgIyBhcnJheSBtZWQgaW5kZXggdGlsbCBzdG9yYSBhcnJheWVuXHJcblx0Y29uc29sZS5sb2cgJ2dldFF1ZXN0aW9ucycsZy5xdWVzdGlvbnMsIG5ldyBEYXRlKCktc3RhcnRcclxuXHRmb3IgaSBpbiByYW5nZSAxMFxyXG5cdFx0aW5kZXggPSBnLnF1ZXN0aW9uc1tpXVxyXG5cdFx0Y29uc29sZS5sb2cgaW5kZXgsZy50cmVlLmFycltpbmRleF1bM10sIGcudHJlZS5nZXRQYXRoIGluZGV4XHJcblxyXG5cdGcuaW5kZXggPSAwXHJcblx0Zy5wYXRoID0gZy50cmVlLmdldFBhdGggZy5xdWVzdGlvbnNbZy5pbmRleF1cclxuXHRnLmFuc3dlcnMgPSBnLnRyZWUuZ2V0QW5zd2VycyBnLnF1ZXN0aW9uc1tnLmluZGV4XSxnLnN0b3BwXHJcblx0Y29uc29sZS5sb2cgJ2dldEFuc3dlcnMnLGcuYW5zd2Vyc1xyXG5cdGZvciBpIGluIHJhbmdlIDVcclxuXHRcdHNyLmFkZCB7cDpnLnRyZWUuYXJyW2cucXVlc3Rpb25zW2cuaW5kZXhdXVszXSwgcTpnLnRyZWUuZ2V0UGF0aChnLnF1ZXN0aW9uc1tnLmluZGV4XSksIGE6IGcudHJlZS5nZXRBbnN3ZXJzKGcucXVlc3Rpb25zW2cuaW5kZXhdLGcuc3RvcHApfVxyXG5cdFx0Zy5pbmRleCsrXHJcblx0c3IucGljaygpXHJcblxyXG5cdGcuY2hlc3MucmVzZXQoKVxyXG5cdG1vdmVzID0gc3IuY3VycmVudCgpLnEuc3BsaXQgJy4nXHJcblx0Zm9yIG1vdmUgaW4gbW92ZXNcclxuXHRcdGcuY2hlc3MubW92ZSB7ZnJvbTogbW92ZS5zbGljZSgwLDIpLCB0bzptb3ZlLnNsaWNlKDIsNCl9XHJcblx0Zy5ib2FyZC5mbGlwcGVkID0gbW92ZXMubGVuZ3RoJTIgPT0gMVxyXG5cclxuXHR4ZHJhdygpXHJcblxyXG5kcmF3U3BhY2VkUmVwZXRpdGlvbiA9ID0+XHJcblx0ZyA9IGdsb2JhbFxyXG5cdHNyID0gZy5zcGFjZWRSZXBldGl0aW9uXHJcblx0dGV4dEFsaWduIExFRlQsQ0VOVEVSXHJcblx0Zm9yIGJveCxpIGluIHNyLmJveGVzXHJcblx0XHRmaWxsIGlmIGkgPT0gc3IuaW5kZXggdGhlbiAnd2hpdGUnIGVsc2UgJ2JsYWNrJ1xyXG5cdFx0dGV4dCBib3gubGVuZ3RoLDQwKzQwKmksNTAwXHJcblx0dGV4dCAnaW5kZXggJytzci5pbmRleCwyMjAsNTAwXHJcblx0dGV4dCAnc3RhcnQgJytnLnN0YXJ0LDM5MCw1MDBcclxuXHRjdXJyZW50ID0gc3IuY3VycmVudCgpXHJcblx0aWYgY3VycmVudFxyXG5cdFx0Zm9yIG1vdmUsaSBpbiBnLmNoZXNzLmhpc3RvcnkoKVxyXG5cdFx0XHR4ID0gNDUwK2klMiAqIDM1XHJcblx0XHRcdHkgPSAzNSArIGZsb29yKGkvMikgKiAyMFxyXG5cdFx0XHRmaWxsICdibGFjaydcclxuXHRcdFx0aWYgaSUyPT0wIHRoZW4gdGV4dCBpLzIrMSwgeC0yMCwgeVxyXG5cdFx0XHRmaWxsIGlmIGkgPCBzci5wYXRoLnNwbGl0KCcuJykubGVuZ3RoIHRoZW4gJ2xpZ2h0Z3JheScgZWxzZSBbJ3doaXRlJywnYmxhY2snXVtpJTJdXHJcblx0XHRcdHRleHQgbW92ZSwgeCx5XHJcblx0XHR0ZXh0ICdxdWVzdGlvbnMubGVuZ3RoICcrZy5xdWVzdGlvbnMubGVuZ3RoLCAyMDAsNTIwXHJcblx0XHQjIHRleHQgJ3BvcHVsYXJpdHkgJytnLnRyZWUuYXJyW2cucXVlc3Rpb25zW3NyLmluZGV4XV1bM10sIDM5MCw1MjBcclxuXHRcdHRleHQgJ3BvcHVsYXJpdHkgJytjdXJyZW50LnAsIDM5MCw1MjBcclxuXHJcblx0XHRmb3IgYW5zd2VyLGkgaW4gY3VycmVudC5hXHJcblx0XHRcdHRleHQgYW5zd2VyLCA0MCArIDQwKmksIDU0MFxyXG5cclxuI1x0XHR0ZXh0IGN1cnJlbnQuYVswXVswXSwgNDAsNTQwXHJcblxyXG5cdHRleHQgJ2Fyci5sZW5ndGggJytnLnRyZWUuYXJyLmxlbmd0aCwgNDAsNTIwXHJcblxyXG54ZHJhdyA9ID0+XHJcblx0YmFja2dyb3VuZCAnZ3JheSdcclxuXHR0ZXh0U2l6ZSBTSVpFXHJcblx0Z2xvYmFsLmJvYXJkLmRyYXcoKVxyXG5cdGZvciBidXR0b24gaW4gZ2xvYmFsLmJ1dHRvbnNcclxuXHRcdGJ1dHRvbi5kcmF3KClcclxuXHRkcmF3U3BhY2VkUmVwZXRpdGlvbigpXHJcblxyXG4jIHdpbmRvdy5rZXlQcmVzc2VkID0gPT5cclxuIyBcdGlmIGtleSA9PSAnQXJyb3dMZWZ0JyB0aGVuIGNsaWNrU3RyaW5nICdsZWZ0J1xyXG4jIFx0aWYga2V5ID09ICdBcnJvd1JpZ2h0JyAgdGhlbiBjbGlja1N0cmluZyAncmlnaHQnXHJcbiMgXHRpZiBrZXkgPT0gJ0Fycm93VXAnICB0aGVuIGNsaWNrU3RyaW5nICd1cCdcclxuIyBcdGlmIGtleSA9PSAnQXJyb3dEb3duJyB0aGVuIGNsaWNrU3RyaW5nICdkb3duJ1xyXG4jIFx0aWYga2V5ID09ICcgJyB0aGVuIGNsaWNrU3RyaW5nICdmbGlwJ1xyXG4jIFx0aWYga2V5ID09ICdIb21lJyB0aGVuIGNsaWNrU3RyaW5nICdmaXJzdCdcclxuIyBcdHhkcmF3KClcclxuIyBcdHJldHVybiBmYWxzZVxyXG5cclxud2luZG93Lm1vdXNlUHJlc3NlZCA9ID0+XHJcblx0aWYgbm90IHJlbGVhc2VkIHRoZW4gcmV0dXJuXHJcblx0cmVsZWFzZWQgPWZhbHNlXHJcblx0Zm9yIGJ1dHRvbiBpbiBnbG9iYWwuYnV0dG9ucy5jb25jYXQgZ2xvYmFsLmJvYXJkLmJ1dHRvbnNcclxuXHRcdGlmIGJ1dHRvbi5pbnNpZGUgbW91c2VYLG1vdXNlWVxyXG5cdFx0XHRidXR0b24ub25jbGljaygpXHJcblx0XHRcdHhkcmF3KClcclxuXHRcdFx0cmV0dXJuIGZhbHNlXHJcblx0Zm9yIHNxdWFyZSBpbiBnbG9iYWwuYm9hcmQuc3F1YXJlc1xyXG5cdFx0aWYgc3F1YXJlLmluc2lkZSBtb3VzZVgsbW91c2VZXHJcblx0XHRcdHNxdWFyZS5vbmNsaWNrKClcclxuXHRcdFx0eGRyYXcoKVxyXG5cdFx0XHRyZXR1cm4gZmFsc2VcclxuXHRmYWxzZVxyXG5cclxud2luZG93Lm1vdXNlUmVsZWFzZWQgPSA9PlxyXG5cdHJlbGVhc2VkID0gdHJ1ZVxyXG5cdGZhbHNlIl19
//# sourceURL=c:\github\2023-022-ChessOpenings-SpacedRepetition\coffee\sketch.coffee