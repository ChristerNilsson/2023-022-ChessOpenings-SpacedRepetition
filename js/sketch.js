// Generated by CoffeeScript 2.5.1
var SIZE, arr, drawSpacedRepetition, released, xdraw;

import _ from 'https://cdn.skypack.dev/lodash';

import {
  ass,
  log,
  range
} from '../js/utils.js';

import {
  Board
} from '../js/board.js';

import {
  Button
} from '../js/button.js';

import {
  clickString,
  global
} from '../js/globals.js';

import {
  SpacedRepetition
} from '../js/spaced_repetition.js';

import {
  Tree
} from '../js/tree.js';

SIZE = global.SIZE;

released = true; // prevention of touch bounce

arr = null;

window.preload = () => {
  var j, k, len, len1, letter, ref, ref1, results;
  //arr = loadJSON './data/arr-2014-08.json' # SIZE = 0
  //arr = loadJSON './data/arr-2016-02.json' # SIZE = 1
  //arr = loadJSON './data/arr-2019-06.json' # SIZE = 2
  arr = loadJSON('./data/arr.json');
  ref = "rnbqkp";
  for (j = 0, len = ref.length; j < len; j++) {
    letter = ref[j];
    global.pics[letter] = loadImage('./images/b' + letter + '.png');
  }
  ref1 = "RNBQKP";
  results = [];
  for (k = 0, len1 = ref1.length; k < len1; k++) {
    letter = ref1[k];
    results.push(global.pics[letter] = loadImage('./images/w' + letter.toLowerCase() + '.png'));
  }
  return results;
};

window.setup = () => {
  var g, i, j, k, len, len1, move, moves, ref, sr, start;
  createCanvas(SIZE * 10.3, SIZE * 11);
  textAlign(CENTER, CENTER);
  rectMode(CENTER);
  g = global;
  g.tree = new Tree(arr.arr);
  g.board = new Board();
  g.chess = new Chess();
  // g.tree.test()
  g.spacedRepetition = new SpacedRepetition();
  sr = g.spacedRepetition;
  g.path1 = 'e2e4.e7e5.g1f3.b8c6.f1c4'; // f√•r ej vara ''
  g.start = g.tree.getStart(g.path1);
  g.stopp = g.tree.getStopp(g.path1, g.start);
  console.log('start', g.start, 'stopp', g.stopp);
  start = new Date();
  g.questions = g.tree.getQuestions(g.start, g.stopp); // array med index till stora arrayen
  console.log('getQuestions', g.questions.length, new Date() - start);
  g.index = 0;
  g.path = g.tree.getPath(g.questions[g.index]);
  g.answers = g.tree.facit(g.questions[g.index], g.stopp);
  console.log('facit', g.answers);
  ref = range(5);
  for (j = 0, len = ref.length; j < len; j++) {
    i = ref[j];
    sr.add({
      q: g.tree.getPath(g.questions[g.index]),
      a: g.tree.facit(g.questions[g.index], g.stopp)
    });
    g.index++;
  }
  sr.pick();
  g.chess.reset();
  moves = sr.current().q.split('.');
  for (k = 0, len1 = moves.length; k < len1; k++) {
    move = moves[k];
    g.chess.move({
      from: move.slice(0, 2),
      to: move.slice(2, 4)
    });
  }
  g.board.flipped = moves.length % 2 === 1;
  return xdraw();
};

drawSpacedRepetition = () => {
  var answer, box, current, g, i, j, k, l, len, len1, len2, move, ref, ref1, ref2, sr, x, y;
  g = global;
  sr = g.spacedRepetition;
  textAlign(LEFT, CENTER);
  ref = sr.boxes;
  for (i = j = 0, len = ref.length; j < len; i = ++j) {
    box = ref[i];
    fill(i === sr.currIndex ? 'white' : 'black');
    text(box.length, 40 + 40 * i, 500);
  }
  text('currIndex ' + sr.currIndex, 220, 500);
  text('start ' + g.start, 390, 500);
  current = sr.current();
  if (current) {
    ref1 = g.chess.history();
    for (i = k = 0, len1 = ref1.length; k < len1; i = ++k) {
      move = ref1[i];
      x = 450 + i % 2 * 35;
      y = 35 + floor(i / 2) * 20;
      fill('black');
      if (i % 2 === 0) {
        text(i / 2 + 1, x - 20, y);
      }
      fill(i < g.path1.split('.').length ? 'lightgray' : ['white', 'black'][i % 2]);
      text(move, x, y);
    }
    text('questions.length ' + g.questions.length, 200, 520);
    text('popularity ' + g.tree.arr[g.questions[sr.currIndex]][3], 390, 520);
    ref2 = current.a;
    for (i = l = 0, len2 = ref2.length; l < len2; i = ++l) {
      answer = ref2[i];
      if (i === 0) {
        text(answer[0], 40 + 40 * i, 540);
      } else if (current.a[i][3] / current.a[i - 1][3] >= 0.8) {
        text(answer[0], 40 + 40 * i, 540);
      } else {
        break;
      }
    }
  }
  //		text current.a[0][0], 40,540
  return text('arr.length ' + g.tree.arr.length, 40, 520);
};

xdraw = () => {
  var button, j, len, ref;
  background('gray');
  textSize(SIZE);
  global.board.draw();
  ref = global.buttons;
  for (j = 0, len = ref.length; j < len; j++) {
    button = ref[j];
    button.draw();
  }
  return drawSpacedRepetition();
};

// window.keyPressed = =>
// 	if key == 'ArrowLeft' then clickString 'left'
// 	if key == 'ArrowRight'  then clickString 'right'
// 	if key == 'ArrowUp'  then clickString 'up'
// 	if key == 'ArrowDown' then clickString 'down'
// 	if key == ' ' then clickString 'flip'
// 	if key == 'Home' then clickString 'first'
// 	xdraw()
// 	return false
window.mousePressed = () => {
  var button, j, k, len, len1, ref, ref1, square;
  if (!released) {
    return;
  }
  released = false;
  ref = global.buttons.concat(global.board.buttons);
  for (j = 0, len = ref.length; j < len; j++) {
    button = ref[j];
    if (button.inside(mouseX, mouseY)) {
      button.onclick();
      xdraw();
      return false;
    }
  }
  ref1 = global.board.squares;
  for (k = 0, len1 = ref1.length; k < len1; k++) {
    square = ref1[k];
    if (square.inside(mouseX, mouseY)) {
      square.onclick();
      xdraw();
      return false;
    }
  }
  return false;
};

window.mouseReleased = () => {
  released = true;
  return false;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsSUFBQSxFQUFBLEdBQUEsRUFBQSxvQkFBQSxFQUFBLFFBQUEsRUFBQTs7QUFBQSxPQUFPLENBQVAsTUFBQTs7QUFDQSxPQUFBO0VBQVEsR0FBUjtFQUFZLEdBQVo7RUFBZ0IsS0FBaEI7Q0FBQSxNQUFBOztBQUNBLE9BQUE7RUFBUSxLQUFSO0NBQUEsTUFBQTs7QUFDQSxPQUFBO0VBQVEsTUFBUjtDQUFBLE1BQUE7O0FBQ0EsT0FBQTtFQUFRLFdBQVI7RUFBb0IsTUFBcEI7Q0FBQSxNQUFBOztBQUNBLE9BQUE7RUFBUSxnQkFBUjtDQUFBLE1BQUE7O0FBQ0EsT0FBQTtFQUFRLElBQVI7Q0FBQSxNQUFBOztBQUVBLElBQUEsR0FBTyxNQUFNLENBQUM7O0FBQ2QsUUFBQSxHQUFXLEtBVFg7O0FBVUEsR0FBQSxHQUFNOztBQUVOLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLENBQUEsQ0FBQSxHQUFBO0FBQ2pCLE1BQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLE1BQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLE9BQUE7Ozs7RUFHQyxHQUFBLEdBQU0sUUFBQSxDQUFTLGlCQUFUO0FBRU47RUFBQSxLQUFBLHFDQUFBOztJQUNDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBRCxDQUFYLEdBQXNCLFNBQUEsQ0FBVSxZQUFBLEdBQWUsTUFBZixHQUF3QixNQUFsQztFQUR2QjtBQUVBO0FBQUE7RUFBQSxLQUFBLHdDQUFBOztpQkFDQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQUQsQ0FBWCxHQUFzQixTQUFBLENBQVUsWUFBQSxHQUFlLE1BQU0sQ0FBQyxXQUFQLENBQUEsQ0FBZixHQUFzQyxNQUFoRDtFQUR2QixDQUFBOztBQVJnQjs7QUFXakIsTUFBTSxDQUFDLEtBQVAs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ImltcG9ydCBfIGZyb20gJ2h0dHBzOi8vY2RuLnNreXBhY2suZGV2L2xvZGFzaCdcclxuaW1wb3J0IHthc3MsbG9nLHJhbmdlfSBmcm9tICcuLi9qcy91dGlscy5qcydcclxuaW1wb3J0IHtCb2FyZH0gZnJvbSAnLi4vanMvYm9hcmQuanMnXHJcbmltcG9ydCB7QnV0dG9ufSBmcm9tICcuLi9qcy9idXR0b24uanMnXHJcbmltcG9ydCB7Y2xpY2tTdHJpbmcsZ2xvYmFsfSBmcm9tICcuLi9qcy9nbG9iYWxzLmpzJ1xyXG5pbXBvcnQge1NwYWNlZFJlcGV0aXRpb259IGZyb20gJy4uL2pzL3NwYWNlZF9yZXBldGl0aW9uLmpzJ1xyXG5pbXBvcnQge1RyZWV9IGZyb20gJy4uL2pzL3RyZWUuanMnXHJcblxyXG5TSVpFID0gZ2xvYmFsLlNJWkVcclxucmVsZWFzZWQgPSB0cnVlICMgcHJldmVudGlvbiBvZiB0b3VjaCBib3VuY2VcclxuYXJyID0gbnVsbFxyXG5cclxud2luZG93LnByZWxvYWQgPSA9PlxyXG5cdCNhcnIgPSBsb2FkSlNPTiAnLi9kYXRhL2Fyci0yMDE0LTA4Lmpzb24nICMgU0laRSA9IDBcclxuXHQjYXJyID0gbG9hZEpTT04gJy4vZGF0YS9hcnItMjAxNi0wMi5qc29uJyAjIFNJWkUgPSAxXHJcblx0I2FyciA9IGxvYWRKU09OICcuL2RhdGEvYXJyLTIwMTktMDYuanNvbicgIyBTSVpFID0gMlxyXG5cdGFyciA9IGxvYWRKU09OICcuL2RhdGEvYXJyLmpzb24nXHJcblxyXG5cdGZvciBsZXR0ZXIgaW4gXCJybmJxa3BcIlxyXG5cdFx0Z2xvYmFsLnBpY3NbbGV0dGVyXSA9IGxvYWRJbWFnZSAnLi9pbWFnZXMvYicgKyBsZXR0ZXIgKyAnLnBuZydcclxuXHRmb3IgbGV0dGVyIGluIFwiUk5CUUtQXCJcclxuXHRcdGdsb2JhbC5waWNzW2xldHRlcl0gPSBsb2FkSW1hZ2UgJy4vaW1hZ2VzL3cnICsgbGV0dGVyLnRvTG93ZXJDYXNlKCkgKyAnLnBuZydcclxuXHJcbndpbmRvdy5zZXR1cCA9ID0+XHJcblx0Y3JlYXRlQ2FudmFzIFNJWkUqMTAuMywgU0laRSoxMVxyXG5cdHRleHRBbGlnbiBDRU5URVIsQ0VOVEVSXHJcblx0cmVjdE1vZGUgQ0VOVEVSXHJcblxyXG5cdGcgPSBnbG9iYWxcclxuXHJcblx0Zy50cmVlID0gbmV3IFRyZWUgYXJyLmFyclxyXG5cdGcuYm9hcmQgPSBuZXcgQm9hcmQoKVxyXG5cdGcuY2hlc3MgPSBuZXcgQ2hlc3MoKVxyXG5cdCMgZy50cmVlLnRlc3QoKVxyXG5cclxuXHRnLnNwYWNlZFJlcGV0aXRpb24gPSBuZXcgU3BhY2VkUmVwZXRpdGlvbigpXHJcblx0c3IgPSBnLnNwYWNlZFJlcGV0aXRpb25cclxuXHRnLnBhdGgxID0nZTJlNC5lN2U1LmcxZjMuYjhjNi5mMWM0JyAjIGbDpXIgZWogdmFyYSAnJ1xyXG5cdGcuc3RhcnQgPSBnLnRyZWUuZ2V0U3RhcnQgZy5wYXRoMVxyXG5cdGcuc3RvcHAgPSBnLnRyZWUuZ2V0U3RvcHAgZy5wYXRoMSxnLnN0YXJ0XHJcblx0Y29uc29sZS5sb2cgJ3N0YXJ0JyxnLnN0YXJ0LCAnc3RvcHAnLGcuc3RvcHBcclxuXHJcblx0c3RhcnQgPSBuZXcgRGF0ZSgpXHJcblx0Zy5xdWVzdGlvbnMgPSBnLnRyZWUuZ2V0UXVlc3Rpb25zIGcuc3RhcnQsZy5zdG9wcCAjIGFycmF5IG1lZCBpbmRleCB0aWxsIHN0b3JhIGFycmF5ZW5cclxuXHRjb25zb2xlLmxvZyAnZ2V0UXVlc3Rpb25zJyxnLnF1ZXN0aW9ucy5sZW5ndGgsIG5ldyBEYXRlKCktc3RhcnRcclxuXHJcblx0Zy5pbmRleCA9IDBcclxuXHRnLnBhdGggPSBnLnRyZWUuZ2V0UGF0aCBnLnF1ZXN0aW9uc1tnLmluZGV4XVxyXG5cdGcuYW5zd2VycyA9IGcudHJlZS5mYWNpdCBnLnF1ZXN0aW9uc1tnLmluZGV4XSxnLnN0b3BwXHJcblx0Y29uc29sZS5sb2cgJ2ZhY2l0JyxnLmFuc3dlcnNcclxuXHRmb3IgaSBpbiByYW5nZSA1XHJcblx0XHRzci5hZGQge3E6Zy50cmVlLmdldFBhdGgoZy5xdWVzdGlvbnNbZy5pbmRleF0pLCBhOiBnLnRyZWUuZmFjaXQoZy5xdWVzdGlvbnNbZy5pbmRleF0sZy5zdG9wcCl9XHJcblx0XHRnLmluZGV4KytcclxuXHRzci5waWNrKClcclxuXHJcblx0Zy5jaGVzcy5yZXNldCgpXHJcblx0bW92ZXMgPSBzci5jdXJyZW50KCkucS5zcGxpdCAnLidcclxuXHRmb3IgbW92ZSBpbiBtb3Zlc1xyXG5cdFx0Zy5jaGVzcy5tb3ZlIHtmcm9tOiBtb3ZlLnNsaWNlKDAsMiksIHRvOm1vdmUuc2xpY2UoMiw0KX1cclxuXHRnLmJvYXJkLmZsaXBwZWQgPSBtb3Zlcy5sZW5ndGglMiA9PSAxXHJcblxyXG5cdHhkcmF3KClcclxuXHJcbmRyYXdTcGFjZWRSZXBldGl0aW9uID0gPT5cclxuXHRnID0gZ2xvYmFsXHJcblx0c3IgPSBnLnNwYWNlZFJlcGV0aXRpb25cclxuXHR0ZXh0QWxpZ24gTEVGVCxDRU5URVJcclxuXHRmb3IgYm94LGkgaW4gc3IuYm94ZXNcclxuXHRcdGZpbGwgaWYgaSA9PSBzci5jdXJySW5kZXggdGhlbiAnd2hpdGUnIGVsc2UgJ2JsYWNrJ1xyXG5cdFx0dGV4dCBib3gubGVuZ3RoLDQwKzQwKmksNTAwXHJcblx0dGV4dCAnY3VyckluZGV4ICcrc3IuY3VyckluZGV4LDIyMCw1MDBcclxuXHR0ZXh0ICdzdGFydCAnK2cuc3RhcnQsMzkwLDUwMFxyXG5cdGN1cnJlbnQgPSBzci5jdXJyZW50KClcclxuXHRpZiBjdXJyZW50XHJcblx0XHRmb3IgbW92ZSxpIGluIGcuY2hlc3MuaGlzdG9yeSgpXHJcblx0XHRcdHggPSA0NTAraSUyICogMzVcclxuXHRcdFx0eSA9IDM1ICsgZmxvb3IoaS8yKSAqIDIwXHJcblx0XHRcdGZpbGwgJ2JsYWNrJ1xyXG5cdFx0XHRpZiBpJTI9PTAgdGhlbiB0ZXh0IGkvMisxLCB4LTIwLCB5XHJcblx0XHRcdGZpbGwgaWYgaSA8IGcucGF0aDEuc3BsaXQoJy4nKS5sZW5ndGggdGhlbiAnbGlnaHRncmF5JyBlbHNlIFsnd2hpdGUnLCdibGFjayddW2klMl1cclxuXHRcdFx0dGV4dCBtb3ZlLCB4LHlcclxuXHRcdHRleHQgJ3F1ZXN0aW9ucy5sZW5ndGggJytnLnF1ZXN0aW9ucy5sZW5ndGgsIDIwMCw1MjBcclxuXHRcdHRleHQgJ3BvcHVsYXJpdHkgJytnLnRyZWUuYXJyW2cucXVlc3Rpb25zW3NyLmN1cnJJbmRleF1dWzNdLCAzOTAsNTIwXHJcblxyXG5cdFx0Zm9yIGFuc3dlcixpIGluIGN1cnJlbnQuYVxyXG5cdFx0XHRpZiBpPT0wIHRoZW4gdGV4dCBhbnN3ZXJbMF0sIDQwICsgNDAqaSwgNTQwXHJcblx0XHRcdGVsc2UgaWYgY3VycmVudC5hW2ldWzNdIC8gY3VycmVudC5hW2ktMV1bM10gPj0gMC44XHJcblx0XHRcdFx0dGV4dCBhbnN3ZXJbMF0sIDQwICsgNDAqaSwgNTQwXHJcblx0XHRcdGVsc2UgYnJlYWtcclxuXHJcbiNcdFx0dGV4dCBjdXJyZW50LmFbMF1bMF0sIDQwLDU0MFxyXG5cclxuXHR0ZXh0ICdhcnIubGVuZ3RoICcrZy50cmVlLmFyci5sZW5ndGgsIDQwLDUyMFxyXG5cclxueGRyYXcgPSA9PlxyXG5cdGJhY2tncm91bmQgJ2dyYXknXHJcblx0dGV4dFNpemUgU0laRVxyXG5cdGdsb2JhbC5ib2FyZC5kcmF3KClcclxuXHRmb3IgYnV0dG9uIGluIGdsb2JhbC5idXR0b25zXHJcblx0XHRidXR0b24uZHJhdygpXHJcblx0ZHJhd1NwYWNlZFJlcGV0aXRpb24oKVxyXG5cclxuIyB3aW5kb3cua2V5UHJlc3NlZCA9ID0+XHJcbiMgXHRpZiBrZXkgPT0gJ0Fycm93TGVmdCcgdGhlbiBjbGlja1N0cmluZyAnbGVmdCdcclxuIyBcdGlmIGtleSA9PSAnQXJyb3dSaWdodCcgIHRoZW4gY2xpY2tTdHJpbmcgJ3JpZ2h0J1xyXG4jIFx0aWYga2V5ID09ICdBcnJvd1VwJyAgdGhlbiBjbGlja1N0cmluZyAndXAnXHJcbiMgXHRpZiBrZXkgPT0gJ0Fycm93RG93bicgdGhlbiBjbGlja1N0cmluZyAnZG93bidcclxuIyBcdGlmIGtleSA9PSAnICcgdGhlbiBjbGlja1N0cmluZyAnZmxpcCdcclxuIyBcdGlmIGtleSA9PSAnSG9tZScgdGhlbiBjbGlja1N0cmluZyAnZmlyc3QnXHJcbiMgXHR4ZHJhdygpXHJcbiMgXHRyZXR1cm4gZmFsc2VcclxuXHJcbndpbmRvdy5tb3VzZVByZXNzZWQgPSA9PlxyXG5cdGlmIG5vdCByZWxlYXNlZCB0aGVuIHJldHVyblxyXG5cdHJlbGVhc2VkID1mYWxzZVxyXG5cdGZvciBidXR0b24gaW4gZ2xvYmFsLmJ1dHRvbnMuY29uY2F0IGdsb2JhbC5ib2FyZC5idXR0b25zXHJcblx0XHRpZiBidXR0b24uaW5zaWRlIG1vdXNlWCxtb3VzZVlcclxuXHRcdFx0YnV0dG9uLm9uY2xpY2soKVxyXG5cdFx0XHR4ZHJhdygpXHJcblx0XHRcdHJldHVybiBmYWxzZVxyXG5cdGZvciBzcXVhcmUgaW4gZ2xvYmFsLmJvYXJkLnNxdWFyZXNcclxuXHRcdGlmIHNxdWFyZS5pbnNpZGUgbW91c2VYLG1vdXNlWVxyXG5cdFx0XHRzcXVhcmUub25jbGljaygpXHJcblx0XHRcdHhkcmF3KClcclxuXHRcdFx0cmV0dXJuIGZhbHNlXHJcblx0ZmFsc2VcclxuXHJcbndpbmRvdy5tb3VzZVJlbGVhc2VkID0gPT5cclxuXHRyZWxlYXNlZCA9IHRydWVcclxuXHRmYWxzZSJdfQ==
//# sourceURL=c:\github\2023-022-ChessOpenings-SpacedRepetition\coffee\sketch.coffee