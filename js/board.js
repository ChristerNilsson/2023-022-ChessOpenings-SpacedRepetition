// Generated by CoffeeScript 2.5.1
var SIZE,
  modulo = function(a, b) { return (+a % (b = +b) + b) % b; };

import _ from 'https://cdn.skypack.dev/lodash';

import {
  ass,
  lerp,
  param,
  range,
  hexToBase64
} from '../js/utils.js';

import {
  // import cryptoJs from 'https://cdn.skypack.dev/crypto-js'
  Square
} from '../js/square.js';

import {
  Button
} from '../js/button.js';

import {
  coords,
  clickString,
  global,
  toObjectNotation,
  toUCI
} from '../js/globals.js';

import {
  dumpState
} from '../js/globals.js';

SIZE = global.SIZE;

export var Board = class Board {
  constructor() {
    var i, k, len, ref, x0, x1, x2, x3;
    this.click = this.click.bind(this);
    this.draw = this.draw.bind(this);
    // @showChildren()
    this.littera = this.littera.bind(this);
    this.flip = this.flip.bind(this);
    this.squares = [];
    this.clickedSquares = [];
    this.pieces = "";
    this.flipped = false;
    ref = range(64);
    for (k = 0, len = ref.length; k < len; k++) {
      i = ref[k];
      ((i) => {
        return this.squares.push(new Square(i, () => {
          return this.click(i);
        }));
      })(i);
    }
    this.buttons = [];
    x0 = 1.5;
    x1 = 3.5;
    x2 = 5.5;
    x3 = 7.5;
    this.buttons.push(new Button(x0 * SIZE, 9.5 * SIZE, 'correct', () => {
      return clickString('correct');
    }));
    this.buttons.push(new Button(x1 * SIZE, 9.5 * SIZE, 'wrong', () => {
      return clickString('wrong');
    }));
    this.buttons.push(new Button(x2 * SIZE, 9.5 * SIZE, 'link', () => {}));
    this.buttons.push(new Button(x3 * SIZE, 9.5 * SIZE, 'debug', () => {}));
  }

  click(i) {
    var col, color, move, row, sq, uci;
    col = modulo(i, 8);
    row = 7 - Math.floor(i / 8);
    sq = global.chess.board()[row][col];
    color = "wb"[modulo(global.chess.history().length, 2)];
    if (this.clickedSquares.length === 0) {
      if (sq !== null && sq.color === color) {
        return this.clickedSquares.push(i);
      }
    } else {
      if (i === this.clickedSquares[0]) {
        return this.clickedSquares = [];
      } else {
        this.clickedSquares.push(i);
        move = toObjectNotation(this.clickedSquares);
        uci = toUCI(this.clickedSquares);
        if (global.chess.move(move)) { // accepera draget
          global.stack.push(global.currNode);
          // console.log uci,global.currNode
          if (!(uci in global.currNode)) {
            global.currNode[uci] = {};
            global.count++;
          }
          global.currNode = global.currNode[uci];
        }
        return this.clickedSquares = [];
      }
    }
  }

  draw() {
    var button, i, j, k, l, len, len1, len2, m, n, piece, ref, ref1, ref2, score;
    this.buttons[3].text = global.count > 0 ? 'save ' + global.count : "";
    ref = this.buttons;
    for (k = 0, len = ref.length; k < len; k++) {
      button = ref[k];
      button.draw();
    }
    // if not global.tree then return
    fill('white');
    textSize(SIZE * 0.3);
    push();
    textAlign(LEFT, CENTER);
    text(global.name, 0.05 * SIZE, 0.3 * SIZE);
    pop();
    ref1 = range(8);
    for (l = 0, len1 = ref1.length; l < len1; l++) {
      i = ref1[l];
      ref2 = range(8);
      for (m = 0, len2 = ref2.length; m < len2; m++) {
        j = ref2[m];
        piece = global.chess.board()[7 - i][j];
        this.squares[i * 8 + j].draw(piece, this.flipped, i * 8 + j === this.clickedSquares[0]);
      }
    }
    stroke('black');
    noFill();
    rect(SIZE * 4.5, SIZE * 4.5, SIZE * 8, SIZE * 8);
    this.littera();
    push();
    textAlign(CENTER, CENTER);
    text(global.version, 7.5 * SIZE, 10 * SIZE);
    //textAlign RIGHT,CENTER
    textSize(20);
    n = global.stack.length;
    if (n === 0) {
      score = '0';
    }
    if (n % 2 === 0) {
      fill('white');
    } else {
      fill('black');
    }
    text(1 + Math.floor(n / 2), 9.4 * SIZE, 0.3 * SIZE);
    return pop();
  }

  littera() {
    var digits, i, k, len, letters, ref, results;
    noStroke();
    fill('black');
    textSize(SIZE * 0.3);
    letters = this.flipped ? "hgfedcba" : "abcdefgh";
    digits = this.flipped ? "12345678" : "87654321";
    ref = range(8);
    results = [];
    for (k = 0, len = ref.length; k < len; k++) {
      i = ref[k];
      text(letters[i], SIZE * (i + 1), SIZE * 8.8);
      results.push(text(digits[i], SIZE * 0.15, SIZE * (i + 1)));
    }
    return results;
  }

  flip() {
    return this.flipped = !this.flipped;
  }

};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYm9hcmQuanMiLCJzb3VyY2VSb290IjoiLi4iLCJzb3VyY2VzIjpbImNvZmZlZVxcYm9hcmQuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxJQUFBLElBQUE7RUFBQTs7QUFBQSxPQUFPLENBQVAsTUFBQTs7QUFDQSxPQUFBO0VBQVEsR0FBUjtFQUFZLElBQVo7RUFBaUIsS0FBakI7RUFBdUIsS0FBdkI7RUFBNkIsV0FBN0I7Q0FBQSxNQUFBOztBQUVBLE9BQUE7O0VBQVEsTUFBUjtDQUFBLE1BQUE7O0FBQ0EsT0FBQTtFQUFRLE1BQVI7Q0FBQSxNQUFBOztBQUNBLE9BQUE7RUFBUSxNQUFSO0VBQWUsV0FBZjtFQUEyQixNQUEzQjtFQUFrQyxnQkFBbEM7RUFBbUQsS0FBbkQ7Q0FBQSxNQUFBOztBQUNBLE9BQUE7RUFBUSxTQUFSO0NBQUEsTUFBQTs7QUFFQSxJQUFBLEdBQU8sTUFBTSxDQUFDOztBQUVkLE9BQUEsSUFBYSxRQUFOLE1BQUEsTUFBQTtFQUNOLFdBQWEsQ0FBQSxDQUFBO0FBQ2QsUUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUE7UUFpQkMsQ0FBQSxZQUFBLENBQUE7UUF3QkEsQ0FBQSxXQUFBLENBQUEsZ0JBekNEOztRQW9GQyxDQUFBLGNBQUEsQ0FBQTtRQVdBLENBQUEsV0FBQSxDQUFBO0lBL0ZDLElBQUMsQ0FBQSxPQUFELEdBQVc7SUFDWCxJQUFDLENBQUEsY0FBRCxHQUFrQjtJQUNsQixJQUFDLENBQUEsTUFBRCxHQUFVO0lBQ1YsSUFBQyxDQUFBLE9BQUQsR0FBVztBQUNYO0lBQUEsS0FBQSxxQ0FBQTs7TUFDSSxDQUFBLENBQUMsQ0FBRCxDQUFBLEdBQUE7ZUFBTyxJQUFDLENBQUEsT0FBTyxDQUFDLElBQVQsQ0FBYyxJQUFJLE1BQUosQ0FBVyxDQUFYLEVBQWMsQ0FBQSxDQUFBLEdBQUE7aUJBQUcsSUFBQyxDQUFBLEtBQUQsQ0FB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QUFBLEdBQUUsQ0FBSCxDQUE5QjtJQUZELENBQUE7O0VBUFM7O0VBV1YsSUFBTyxDQUFBLENBQUE7V0FBRyxJQUFDLENBQUEsT0FBRCxHQUFXLENBQUksSUFBQyxDQUFBO0VBQW5COztBQWpHRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2h0dHBzOi8vY2RuLnNreXBhY2suZGV2L2xvZGFzaCdcclxuaW1wb3J0IHthc3MsbGVycCxwYXJhbSxyYW5nZSxoZXhUb0Jhc2U2NH0gZnJvbSAnLi4vanMvdXRpbHMuanMnXHJcbiMgaW1wb3J0IGNyeXB0b0pzIGZyb20gJ2h0dHBzOi8vY2RuLnNreXBhY2suZGV2L2NyeXB0by1qcydcclxuaW1wb3J0IHtTcXVhcmV9IGZyb20gJy4uL2pzL3NxdWFyZS5qcydcclxuaW1wb3J0IHtCdXR0b259IGZyb20gJy4uL2pzL2J1dHRvbi5qcydcclxuaW1wb3J0IHtjb29yZHMsY2xpY2tTdHJpbmcsZ2xvYmFsLHRvT2JqZWN0Tm90YXRpb24sdG9VQ0l9IGZyb20gJy4uL2pzL2dsb2JhbHMuanMnXHJcbmltcG9ydCB7ZHVtcFN0YXRlfSBmcm9tICcuLi9qcy9nbG9iYWxzLmpzJ1xyXG5cclxuU0laRSA9IGdsb2JhbC5TSVpFXHJcblxyXG5leHBvcnQgY2xhc3MgQm9hcmRcclxuXHRjb25zdHJ1Y3RvcjogLT5cclxuXHRcdEBzcXVhcmVzID0gW11cclxuXHRcdEBjbGlja2VkU3F1YXJlcyA9IFtdXHJcblx0XHRAcGllY2VzID0gXCJcIlxyXG5cdFx0QGZsaXBwZWQgPSBmYWxzZVxyXG5cdFx0Zm9yIGkgaW4gcmFuZ2UgNjRcclxuXHRcdFx0ZG8gKGkpID0+IEBzcXVhcmVzLnB1c2ggbmV3IFNxdWFyZSBpLCA9PiBAY2xpY2sgaVxyXG5cclxuXHRcdEBidXR0b25zID0gW11cclxuXHRcdHgwID0gMS41XHJcblx0XHR4MSA9IDMuNVxyXG5cdFx0eDIgPSA1LjVcclxuXHRcdHgzID0gNy41XHJcblx0XHRAYnV0dG9ucy5wdXNoIG5ldyBCdXR0b24geDAqU0laRSwgOS41KlNJWkUsICdjb3JyZWN0JywgPT4gY2xpY2tTdHJpbmcgJ2NvcnJlY3QnXHJcblx0XHRAYnV0dG9ucy5wdXNoIG5ldyBCdXR0b24geDEqU0laRSwgOS41KlNJWkUsICd3cm9uZycsID0+IGNsaWNrU3RyaW5nICd3cm9uZydcclxuXHRcdEBidXR0b25zLnB1c2ggbmV3IEJ1dHRvbiB4MipTSVpFLCA5LjUqU0laRSwgJ2xpbmsnLCAgPT5cclxuXHRcdEBidXR0b25zLnB1c2ggbmV3IEJ1dHRvbiB4MypTSVpFLCA5LjUqU0laRSwgJ2RlYnVnJywgPT5cclxuXHJcblx0Y2xpY2sgOiAoaSkgPT5cclxuXHRcdGNvbCA9IGkgJSUgOFxyXG5cdFx0cm93ID0gNy1pIC8vIDhcclxuXHRcdHNxID0gZ2xvYmFsLmNoZXNzLmJvYXJkKClbcm93XVtjb2xdXHJcblx0XHRjb2xvciA9IFwid2JcIltnbG9iYWwuY2hlc3MuaGlzdG9yeSgpLmxlbmd0aCAlJSAyXSAjIGbDtnJ2w6RudGFkIGbDpHJnIHDDpSBwasOkc2VuXHJcblxyXG5cdFx0aWYgQGNsaWNrZWRTcXVhcmVzLmxlbmd0aCA9PSAwXHJcblx0XHRcdGlmIHNxICE9IG51bGwgYW5kIHNxLmNvbG9yID09IGNvbG9yIHRoZW4gQGNsaWNrZWRTcXVhcmVzLnB1c2ggaVxyXG5cdFx0ZWxzZVxyXG5cdFx0XHRpZiBpID09IEBjbGlja2VkU3F1YXJlc1swXVxyXG5cdFx0XHRcdEBjbGlja2VkU3F1YXJlcyA9IFtdXHJcblx0XHRcdGVsc2VcclxuXHRcdFx0XHRAY2xpY2tlZFNxdWFyZXMucHVzaCBpXHJcblx0XHRcdFx0bW92ZSA9IHRvT2JqZWN0Tm90YXRpb24gQGNsaWNrZWRTcXVhcmVzXHJcblx0XHRcdFx0dWNpID0gdG9VQ0kgQGNsaWNrZWRTcXVhcmVzXHJcblx0XHRcdFx0aWYgZ2xvYmFsLmNoZXNzLm1vdmUgbW92ZSAjIGFjY2VwZXJhIGRyYWdldFxyXG5cdFx0XHRcdFx0Z2xvYmFsLnN0YWNrLnB1c2ggZ2xvYmFsLmN1cnJOb2RlXHJcblx0XHRcdFx0XHQjIGNvbnNvbGUubG9nIHVjaSxnbG9iYWwuY3Vyck5vZGVcclxuXHRcdFx0XHRcdGlmIHVjaSBub3Qgb2YgZ2xvYmFsLmN1cnJOb2RlXHJcblx0XHRcdFx0XHRcdGdsb2JhbC5jdXJyTm9kZVt1Y2ldID0ge31cclxuXHRcdFx0XHRcdFx0Z2xvYmFsLmNvdW50KytcclxuXHRcdFx0XHRcdGdsb2JhbC5jdXJyTm9kZSA9IGdsb2JhbC5jdXJyTm9kZVt1Y2ldXHJcblx0XHRcdFx0QGNsaWNrZWRTcXVhcmVzID0gW11cclxuXHJcblx0ZHJhdyA6ID0+XHJcblxyXG5cdFx0QGJ1dHRvbnNbM10udGV4dCA9IGlmIGdsb2JhbC5jb3VudD4wIHRoZW4gJ3NhdmUgJyArIGdsb2JhbC5jb3VudCBlbHNlIFwiXCJcclxuXHJcblx0XHRmb3IgYnV0dG9uIGluIEBidXR0b25zXHJcblx0XHRcdGJ1dHRvbi5kcmF3KClcclxuXHJcblx0XHQjIGlmIG5vdCBnbG9iYWwudHJlZSB0aGVuIHJldHVyblxyXG5cclxuXHRcdGZpbGwgJ3doaXRlJ1xyXG5cdFx0dGV4dFNpemUgU0laRSowLjNcclxuXHJcblx0XHRwdXNoKClcclxuXHRcdHRleHRBbGlnbiBMRUZULENFTlRFUlxyXG5cdFx0dGV4dCBnbG9iYWwubmFtZSwwLjA1KlNJWkUsIDAuMypTSVpFXHJcblx0XHRwb3AoKVxyXG5cclxuXHRcdGZvciBpIGluIHJhbmdlIDhcclxuXHRcdFx0Zm9yIGogaW4gcmFuZ2UgOFxyXG5cdFx0XHRcdHBpZWNlID0gZ2xvYmFsLmNoZXNzLmJvYXJkKClbNy1pXVtqXSAjIHtzcXVhcmUsIHR5cGUsIGNvbG9yfVxyXG5cdFx0XHRcdEBzcXVhcmVzW2kqOCtqXS5kcmF3IHBpZWNlLCBAZmxpcHBlZCwgaSo4K2o9PUBjbGlja2VkU3F1YXJlc1swXVxyXG5cclxuXHRcdHN0cm9rZSAnYmxhY2snXHJcblx0XHRub0ZpbGwoKVxyXG5cdFx0cmVjdCBTSVpFKjQuNSxTSVpFKjQuNSxTSVpFKjgsU0laRSo4XHJcblxyXG5cdFx0QGxpdHRlcmEoKVxyXG5cclxuXHRcdHB1c2goKVxyXG5cdFx0dGV4dEFsaWduIENFTlRFUixDRU5URVJcclxuXHJcblx0XHR0ZXh0IGdsb2JhbC52ZXJzaW9uLCA3LjUqU0laRSwgMTAqU0laRVxyXG5cdFx0I3RleHRBbGlnbiBSSUdIVCxDRU5URVJcclxuXHJcblx0XHR0ZXh0U2l6ZSAyMFxyXG5cdFx0biA9IGdsb2JhbC5zdGFjay5sZW5ndGhcclxuXHRcdGlmIG4gPT0gMCB0aGVuIHNjb3JlID0gJzAnXHJcblx0XHRpZiBuJTIgPT0gMCB0aGVuIGZpbGwgJ3doaXRlJyBlbHNlIGZpbGwgJ2JsYWNrJ1xyXG5cdFx0dGV4dCAxK24vLzIsIDkuNCpTSVpFLCAwLjMqU0laRVxyXG5cclxuXHRcdHBvcCgpXHJcblx0XHQjIEBzaG93Q2hpbGRyZW4oKVxyXG5cclxuXHRsaXR0ZXJhIDogPT5cclxuXHRcdG5vU3Ryb2tlKClcclxuXHRcdGZpbGwgJ2JsYWNrJ1xyXG5cdFx0dGV4dFNpemUgU0laRSowLjNcclxuXHRcdGxldHRlcnMgPSBpZiBAZmxpcHBlZCB0aGVuIFwiaGdmZWRjYmFcIiBlbHNlIFwiYWJjZGVmZ2hcIlxyXG5cdFx0ZGlnaXRzID0gaWYgQGZsaXBwZWQgdGhlbiAgXCIxMjM0NTY3OFwiIGVsc2UgXCI4NzY1NDMyMVwiXHJcblxyXG5cdFx0Zm9yIGkgaW4gcmFuZ2UgOFxyXG5cdFx0XHR0ZXh0IGxldHRlcnNbaV0sU0laRSooaSsxKSxTSVpFKjguOFxyXG5cdFx0XHR0ZXh0IGRpZ2l0c1tpXSxTSVpFKjAuMTUsU0laRSooaSsxKVxyXG5cclxuXHRmbGlwIDogPT4gQGZsaXBwZWQgPSBub3QgQGZsaXBwZWRcclxuIl19
//# sourceURL=c:\github\2023-022-ChessOpenings-SpacedRepetition\coffee\board.coffee