// Generated by CoffeeScript 2.5.1
var SIZE, getNextQuestion,
  modulo = function(a, b) { return (+a % (b = +b) + b) % b; },
  indexOf = [].indexOf;

import _ from 'https://cdn.skypack.dev/lodash';

import {
  ass,
  lerp,
  param,
  range,
  hexToBase64
} from '../js/utils.js';

import {
  Square
} from '../js/square.js';

import {
  Button
} from '../js/button.js';

import {
  coords,
  clickString,
  global,
  toObjectNotation,
  toUCI
} from '../js/globals.js';

import {
  dumpState
} from '../js/globals.js';

SIZE = global.SIZE;

getNextQuestion = () => {
  var g, i, k, l, len, len1, move, moves, qi, ref, sr;
  g = global;
  sr = g.spacedRepetition;
  if (sr.boxes[0].length === 0) {
    ref = range(5);
    for (k = 0, len = ref.length; k < len; k++) {
      i = ref[k];
      if (sr.qindex < sr.questions.length - 1) {
        qi = sr.questions[sr.qindex];
        sr.add({
          p: g.tree.arr[qi][3],
          q: g.tree.getPath(qi),
          a: g.tree.getAnswers(qi, sr.stopp)
        });
        sr.qindex++;
      }
    }
  }
  sr.pick();
  g.chess.reset();
  moves = sr.current().q.split('.');
  for (l = 0, len1 = moves.length; l < len1; l++) {
    move = moves[l];
    g.chess.move({
      from: move.slice(0, 2),
      to: move.slice(2, 4)
    });
  }
  return g.board.flipped = moves.length % 2 === 1;
};

export var Board = class Board {
  constructor() {
    var i, k, len, ref;
    //@buttons.push new Button x0*SIZE, 9.5*SIZE, 'correct', => clickString 'correct'
    this.click = this.click.bind(this);
    this.draw = this.draw.bind(this);
    this.littera = this.littera.bind(this);
    this.flip = this.flip.bind(this);
    this.squares = [];
    this.clickedSquares = [];
    this.pieces = "";
    this.flipped = false;
    ref = range(64);
    for (k = 0, len = ref.length; k < len; k++) {
      i = ref[k];
      ((i) => {
        return this.squares.push(new Square(i, () => {
          return this.click(i);
        }));
      })(i);
    }
    this.buttons = [];
  }

  click(i) {
    var col, color, csl, g, row, sq, sr, uci;
    g = global;
    sr = g.spacedRepetition;
    if (this.flipped) {
      i = 63 - i;
    }
    col = modulo(i, 8);
    row = 7 - Math.floor(i / 8);
    sq = g.chess.board()[row][col];
    color = "wb"[modulo(g.chess.history().length, 2)];
    csl = this.clickedSquares.length;
    if (csl === 0) {
      if (sq !== null && sq.color === color) {
        return this.clickedSquares.push(i);
      }
    } else if (csl === 1) {
      if (i === this.clickedSquares[0]) {
        return this.clickedSquares = []; // kontrollera draget
      } else {
        this.clickedSquares.push(i);
        uci = toUCI(this.clickedSquares);
        if (indexOf.call(sr.answers, uci) >= 0) {
          sr.correct();
          getNextQuestion();
          return this.clickedSquares = [];
        }
      }
    } else if (csl === 2) {
      return this.clickedSquares.push(i);
    } else if (csl === 3) {
      this.clickedSquares.push(i);
      uci = toUCI(this.clickedSquares.slice(2, 4));
      if (indexOf.call(sr.answers, uci) >= 0) {
        sr.wrong();
        getNextQuestion();
        return this.clickedSquares = [];
      } else {
        return this.clickedSquares = this.clickedSquares.slice(0, 2);
      }
    }
  }

  draw() {
    var button, i, j, k, l, len, len1, len2, m, piece, ref, ref1, ref2, ref3, ref4, ref5, sq;
    ref = this.buttons;
    for (k = 0, len = ref.length; k < len; k++) {
      button = ref[k];
      button.draw();
    }
    fill('white');
    textSize(SIZE * 0.3);
    ref1 = range(8);
    for (l = 0, len1 = ref1.length; l < len1; l++) {
      i = ref1[l];
      ref2 = range(8);
      for (m = 0, len2 = ref2.length; m < len2; m++) {
        j = ref2[m];
        piece = global.chess.board()[7 - i][j];
        sq = this.squares[i * 8 + j];
        if ((ref3 = this.clickedSquares.length) === 0 || ref3 === 2) {
          sq.draw(piece, this.flipped, false);
        }
        if ((ref4 = this.clickedSquares.length) === 1) {
          sq.draw(piece, this.flipped, i * 8 + j === this.clickedSquares[0]);
        } else if ((ref5 = this.clickedSquares.length) === 3 || ref5 === 4) {
          sq.draw(piece, this.flipped, i * 8 + j === this.clickedSquares[2]);
        }
      }
    }
    stroke('black');
    noFill();
    rect(SIZE * 4.5, SIZE * 4.5, SIZE * 8, SIZE * 8);
    return this.littera();
  }

  littera() {
    var digits, i, k, len, letters, ref, results;
    noStroke();
    fill('black');
    textSize(SIZE * 0.3);
    letters = this.flipped ? "hgfedcba" : "abcdefgh";
    digits = this.flipped ? "12345678" : "87654321";
    ref = range(8);
    results = [];
    for (k = 0, len = ref.length; k < len; k++) {
      i = ref[k];
      text(letters[i], SIZE * (i + 1), SIZE * 8.8);
      results.push(text(digits[i], SIZE * 0.15, SIZE * (i + 1)));
    }
    return results;
  }

  flip() {
    return this.flipped = !this.flipped;
  }

};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYm9hcmQuanMiLCJzb3VyY2VSb290IjoiLi4iLCJzb3VyY2VzIjpbImNvZmZlZVxcYm9hcmQuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxJQUFBLElBQUEsRUFBQSxlQUFBO0VBQUE7OztBQUFBLE9BQU8sQ0FBUCxNQUFBOztBQUNBLE9BQUE7RUFBUSxHQUFSO0VBQVksSUFBWjtFQUFpQixLQUFqQjtFQUF1QixLQUF2QjtFQUE2QixXQUE3QjtDQUFBLE1BQUE7O0FBQ0EsT0FBQTtFQUFRLE1BQVI7Q0FBQSxNQUFBOztBQUNBLE9BQUE7RUFBUSxNQUFSO0NBQUEsTUFBQTs7QUFDQSxPQUFBO0VBQVEsTUFBUjtFQUFlLFdBQWY7RUFBMkIsTUFBM0I7RUFBa0MsZ0JBQWxDO0VBQW1ELEtBQW5EO0NBQUEsTUFBQTs7QUFDQSxPQUFBO0VBQVEsU0FBUjtDQUFBLE1BQUE7O0FBRUEsSUFBQSxHQUFPLE1BQU0sQ0FBQzs7QUFFZCxlQUFBLEdBQWtCLENBQUEsQ0FBQSxHQUFBO0FBQ2xCLE1BQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxFQUFBO0VBQUMsQ0FBQSxHQUFJO0VBQ0osRUFBQSxHQUFLLENBQUMsQ0FBQztFQUNQLElBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFELENBQUcsQ0FBQyxNQUFaLEtBQXNCLENBQXpCO0FBQ0M7SUFBQSxLQUFBLHFDQUFBOztNQUNDLElBQUcsRUFBRSxDQUFDLE1BQUgsR0FBWSxFQUFFLENBQUMsU0FBUyxDQUFDLE1BQWIsR0FBb0IsQ0FBbkM7UUFDQyxFQUFBLEdBQUssRUFBRSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsTUFBSjtRQUNqQixFQUFFLENBQUMsR0FBSCxDQUFPO1VBQUMsQ0FBQSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUQsQ0FBSSxD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QUFBLEdBQUEsRUFBQSxPQUFBLEVBQUEsR0FBQSxFQUFBO0lBQUUsUUFBQSxDQUFBO0lBQ0EsSUFBQSxDQUFLLE9BQUw7SUFDQSxRQUFBLENBQVMsSUFBQSxHQUFLLEdBQWQ7SUFDQSxPQUFBLEdBQWEsSUFBQyxDQUFBLE9BQUosR0FBaUIsVUFBakIsR0FBaUM7SUFDM0MsTUFBQSxHQUFZLElBQUMsQ0FBQSxPQUFKLEdBQWtCLFVBQWxCLEdBQWtDO0FBRTNDO0FBQUE7SUFBQSxLQUFBLHFDQUFBOztNQUNDLElBQUEsQ0FBSyxPQUFPLENBQUMsQ0FBRCxDQUFaLEVBQWdCLElBQUEsR0FBSyxDQUFDLENBQUEsR0FBRSxDQUFILENBQXJCLEVBQTJCLElBQUEsR0FBSyxHQUFoQzttQkFDQSxJQUFBLENBQUssTUFBTSxDQUFDLENBQUQsQ0FBWCxFQUFlLElBQUEsR0FBSyxJQUFwQixFQUF5QixJQUFBLEdBQUssQ0FBQyxDQUFBLEdBQUUsQ0FBSCxDQUE5QjtJQUZELENBQUE7O0VBUFM7O0VBV1YsSUFBTyxDQUFBLENBQUE7V0FBRyxJQUFDLENBQUEsT0FBRCxHQUFXLENBQUksSUFBQyxDQUFBO0VBQW5COztBQWpGRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2h0dHBzOi8vY2RuLnNreXBhY2suZGV2L2xvZGFzaCdcclxuaW1wb3J0IHthc3MsbGVycCxwYXJhbSxyYW5nZSxoZXhUb0Jhc2U2NH0gZnJvbSAnLi4vanMvdXRpbHMuanMnXHJcbmltcG9ydCB7U3F1YXJlfSBmcm9tICcuLi9qcy9zcXVhcmUuanMnXHJcbmltcG9ydCB7QnV0dG9ufSBmcm9tICcuLi9qcy9idXR0b24uanMnXHJcbmltcG9ydCB7Y29vcmRzLGNsaWNrU3RyaW5nLGdsb2JhbCx0b09iamVjdE5vdGF0aW9uLHRvVUNJfSBmcm9tICcuLi9qcy9nbG9iYWxzLmpzJ1xyXG5pbXBvcnQge2R1bXBTdGF0ZX0gZnJvbSAnLi4vanMvZ2xvYmFscy5qcydcclxuXHJcblNJWkUgPSBnbG9iYWwuU0laRVxyXG5cclxuZ2V0TmV4dFF1ZXN0aW9uID0gPT5cclxuXHRnID0gZ2xvYmFsXHJcblx0c3IgPSBnLnNwYWNlZFJlcGV0aXRpb25cclxuXHRpZiBzci5ib3hlc1swXS5sZW5ndGggPT0gMFxyXG5cdFx0Zm9yIGkgaW4gcmFuZ2UgNVxyXG5cdFx0XHRpZiBzci5xaW5kZXggPCBzci5xdWVzdGlvbnMubGVuZ3RoLTFcclxuXHRcdFx0XHRxaSA9IHNyLnF1ZXN0aW9uc1tzci5xaW5kZXhdXHJcblx0XHRcdFx0c3IuYWRkIHtwOmcudHJlZS5hcnJbcWldWzNdLCBxOmcudHJlZS5nZXRQYXRoKHFpKSwgYTogZy50cmVlLmdldEFuc3dlcnMocWksc3Iuc3RvcHApfVxyXG5cdFx0XHRcdHNyLnFpbmRleCsrXHJcblx0c3IucGljaygpXHJcblx0Zy5jaGVzcy5yZXNldCgpXHJcblx0bW92ZXMgPSBzci5jdXJyZW50KCkucS5zcGxpdCAnLidcclxuXHRmb3IgbW92ZSBpbiBtb3Zlc1xyXG5cdFx0Zy5jaGVzcy5tb3ZlIHtmcm9tOiBtb3ZlLnNsaWNlKDAsMiksIHRvOm1vdmUuc2xpY2UoMiw0KX1cclxuXHRnLmJvYXJkLmZsaXBwZWQgPSBtb3Zlcy5sZW5ndGglMiA9PSAxXHJcblxyXG5leHBvcnQgY2xhc3MgQm9hcmRcclxuXHRjb25zdHJ1Y3RvcjogLT5cclxuXHRcdEBzcXVhcmVzID0gW11cclxuXHRcdEBjbGlja2VkU3F1YXJlcyA9IFtdXHJcblx0XHRAcGllY2VzID0gXCJcIlxyXG5cdFx0QGZsaXBwZWQgPSBmYWxzZVxyXG5cdFx0Zm9yIGkgaW4gcmFuZ2UgNjRcclxuXHRcdFx0ZG8gKGkpID0+IEBzcXVhcmVzLnB1c2ggbmV3IFNxdWFyZSBpLCA9PiBAY2xpY2sgaVxyXG5cclxuXHRcdEBidXR0b25zID0gW11cclxuXHRcdCNAYnV0dG9ucy5wdXNoIG5ldyBCdXR0b24geDAqU0laRSwgOS41KlNJWkUsICdjb3JyZWN0JywgPT4gY2xpY2tTdHJpbmcgJ2NvcnJlY3QnXHJcblxyXG5cdGNsaWNrIDogKGkpID0+XHJcblx0XHRnID0gZ2xvYmFsXHJcblx0XHRzciA9IGcuc3BhY2VkUmVwZXRpdGlvblxyXG5cdFx0aWYgQGZsaXBwZWQgdGhlbiBpID0gNjMtaVxyXG5cdFx0Y29sID0gaSAlJSA4XHJcblx0XHRyb3cgPSA3LWkgLy8gOFxyXG5cdFx0c3EgPSBnLmNoZXNzLmJvYXJkKClbcm93XVtjb2xdXHJcblx0XHRjb2xvciA9IFwid2JcIltnLmNoZXNzLmhpc3RvcnkoKS5sZW5ndGggJSUgMl0gIyBmw7ZydsOkbnRhZCBmw6RyZyBww6UgcGrDpHNlblxyXG5cdFx0Y3NsID0gQGNsaWNrZWRTcXVhcmVzLmxlbmd0aFxyXG5cdFx0aWYgY3NsID09IDBcclxuXHRcdFx0aWYgc3EgIT0gbnVsbCBhbmQgc3EuY29sb3IgPT0gY29sb3IgdGhlbiBAY2xpY2tlZFNxdWFyZXMucHVzaCBpXHJcblx0XHRlbHNlIGlmIGNzbCA9PSAxXHJcblx0XHRcdGlmIGkgPT0gQGNsaWNrZWRTcXVhcmVzWzBdICMgw6VuZ3JhIG9tIHNhbW1hIHJ1dGFcclxuXHRcdFx0XHRAY2xpY2tlZFNxdWFyZXMgPSBbXVxyXG5cdFx0XHRlbHNlICMga29udHJvbGxlcmEgZHJhZ2V0XHJcblx0XHRcdFx0QGNsaWNrZWRTcXVhcmVzLnB1c2ggaVxyXG5cdFx0XHRcdHVjaSA9IHRvVUNJIEBjbGlja2VkU3F1YXJlc1xyXG5cdFx0XHRcdGlmIHVjaSBpbiBzci5hbnN3ZXJzXHJcblx0XHRcdFx0XHRzci5jb3JyZWN0KClcclxuXHRcdFx0XHRcdGdldE5leHRRdWVzdGlvbigpXHJcblx0XHRcdFx0XHRAY2xpY2tlZFNxdWFyZXMgPSBbXVxyXG5cdFx0ZWxzZSBpZiBjc2wgPT0gMlxyXG5cdFx0XHRAY2xpY2tlZFNxdWFyZXMucHVzaCBpXHJcblx0XHRlbHNlIGlmIGNzbCA9PSAzXHJcblx0XHRcdEBjbGlja2VkU3F1YXJlcy5wdXNoIGlcclxuXHRcdFx0dWNpID0gdG9VQ0kgQGNsaWNrZWRTcXVhcmVzLnNsaWNlIDIsNFxyXG5cdFx0XHRpZiB1Y2kgaW4gc3IuYW5zd2Vyc1xyXG5cdFx0XHRcdHNyLndyb25nKClcclxuXHRcdFx0XHRnZXROZXh0UXVlc3Rpb24oKVxyXG5cdFx0XHRcdEBjbGlja2VkU3F1YXJlcyA9IFtdXHJcblx0XHRcdGVsc2VcclxuXHRcdFx0XHRAY2xpY2tlZFNxdWFyZXMgPSBAY2xpY2tlZFNxdWFyZXMuc2xpY2UgMCwyXHJcblxyXG5cdGRyYXcgOiA9PlxyXG5cclxuXHRcdGZvciBidXR0b24gaW4gQGJ1dHRvbnNcclxuXHRcdFx0YnV0dG9uLmRyYXcoKVxyXG5cclxuXHRcdGZpbGwgJ3doaXRlJ1xyXG5cdFx0dGV4dFNpemUgU0laRSowLjNcclxuXHJcblx0XHRmb3IgaSBpbiByYW5nZSA4XHJcblx0XHRcdGZvciBqIGluIHJhbmdlIDhcclxuXHRcdFx0XHRwaWVjZSA9IGdsb2JhbC5jaGVzcy5ib2FyZCgpWzctaV1bal1cclxuXHRcdFx0XHRzcSA9IEBzcXVhcmVzW2kqOCtqXVxyXG5cdFx0XHRcdGlmIEBjbGlja2VkU3F1YXJlcy5sZW5ndGggaW4gWzAsMl1cclxuXHRcdFx0XHRcdHNxLmRyYXcgcGllY2UsIEBmbGlwcGVkLCBmYWxzZVxyXG5cdFx0XHRcdGlmIEBjbGlja2VkU3F1YXJlcy5sZW5ndGggaW4gWzFdXHJcblx0XHRcdFx0XHRzcS5kcmF3IHBpZWNlLCBAZmxpcHBlZCwgaSo4K2o9PUBjbGlja2VkU3F1YXJlc1swXVxyXG5cdFx0XHRcdGVsc2UgaWYgQGNsaWNrZWRTcXVhcmVzLmxlbmd0aCBpbiBbMyw0XVxyXG5cdFx0XHRcdFx0c3EuZHJhdyBwaWVjZSwgQGZsaXBwZWQsIGkqOCtqPT1AY2xpY2tlZFNxdWFyZXNbMl1cclxuXHJcblx0XHRzdHJva2UgJ2JsYWNrJ1xyXG5cdFx0bm9GaWxsKClcclxuXHRcdHJlY3QgU0laRSo0LjUsU0laRSo0LjUsU0laRSo4LFNJWkUqOFxyXG5cclxuXHRcdEBsaXR0ZXJhKClcclxuXHJcblx0bGl0dGVyYSA6ID0+XHJcblx0XHRub1N0cm9rZSgpXHJcblx0XHRmaWxsICdibGFjaydcclxuXHRcdHRleHRTaXplIFNJWkUqMC4zXHJcblx0XHRsZXR0ZXJzID0gaWYgQGZsaXBwZWQgdGhlbiBcImhnZmVkY2JhXCIgZWxzZSBcImFiY2RlZmdoXCJcclxuXHRcdGRpZ2l0cyA9IGlmIEBmbGlwcGVkIHRoZW4gIFwiMTIzNDU2NzhcIiBlbHNlIFwiODc2NTQzMjFcIlxyXG5cclxuXHRcdGZvciBpIGluIHJhbmdlIDhcclxuXHRcdFx0dGV4dCBsZXR0ZXJzW2ldLFNJWkUqKGkrMSksU0laRSo4LjhcclxuXHRcdFx0dGV4dCBkaWdpdHNbaV0sU0laRSowLjE1LFNJWkUqKGkrMSlcclxuXHJcblx0ZmxpcCA6ID0+IEBmbGlwcGVkID0gbm90IEBmbGlwcGVkXHJcbiJdfQ==
//# sourceURL=c:\github\2023-022-ChessOpenings-SpacedRepetition\coffee\board.coffee